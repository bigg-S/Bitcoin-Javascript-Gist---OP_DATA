/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{dQ:()=>ln,ci:()=>Je,bytesToNumberBE:()=>rn,ty:()=>on,eV:()=>un,n$:()=>dn,ql:()=>cn,hexToBytes:()=>tn,_t:()=>Ze,tL:()=>sn,S5:()=>an,FF:()=>gn});var t={};function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o(e,...n){if(!((t=e)instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Expected Uint8Array");var t;if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function s(e,n=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(n&&e.finished)throw new Error("Hash#digest() has already been called")}e.r(t),e.d(t,{hasBrowserEnv:()=>Hi,hasStandardBrowserEnv:()=>ji,hasStandardBrowserWebWorkerEnv:()=>zi});const a="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function c(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const u=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),l=(e,n)=>e<<32-n|e>>>n;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const h=Array.from({length:256},((e,n)=>n.toString(16).padStart(2,"0"))),f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function d(e){return e>=f._0&&e<=f._9?e-f._0:e>=f._A&&e<=f._F?e-(f._A-10):e>=f._a&&e<=f._f?e-(f._a-10):void 0}function p(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function g(e){if("string"==typeof e&&(e=p(e)),!c(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function y(...e){let n=0;for(let t=0;t<e.length;t++){const r=e[t];if(!c(r))throw new Error("Uint8Array expected");n+=r.length}const t=new Uint8Array(n);for(let n=0,r=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t}class w{clone(){return this._cloneInto()}}const m={}.toString;function b(e){const n=n=>e().update(g(n)).digest(),t=e();return n.outputLen=t.outputLen,n.blockLen=t.blockLen,n.create=()=>e(),n}function E(e=32){if(a&&"function"==typeof a.getRandomValues)return a.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class v extends w{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,i(e);const t=g(n);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return s(this),this.iHash.update(e),this}digestInto(e){s(this),o(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:t,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=n._cloneInto(e.oHash),e.iHash=t._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const S=(e,n,t)=>new v(e,n).update(t).digest();S.create=(e,n)=>new v(e,n);class x extends w{constructor(e,n,t,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=u(this.buffer)}update(e){s(this);const{view:n,buffer:t,blockLen:r}=this,o=(e=g(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0),this.pos=0);else{const n=u(e);for(;r<=o-i;i+=r)this.process(n,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){s(this),function(e,n){o(e);const t=n.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}(e,this),this.finished=!0;const{buffer:n,view:t,blockLen:r,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(t,0),a=0);for(let e=a;e<r;e++)n[e]=0;!function(e,n,t,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(n,t,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(t>>o&i),a=Number(t&i),c=r?4:0,u=r?0:4;e.setUint32(n+c,s,r),e.setUint32(n+u,a,r)}(t,r-8,BigInt(8*this.length),i),this.process(t,0);const c=u(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=l/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<h;e++)c.setUint32(4*e,f[e],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const t=e.slice(0,n);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:t,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%n&&e.buffer.set(t),e}}const A=(e,n,t)=>e&n^e&t^n&t,k=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),T=new Uint32Array(64);class P extends x{constructor(){super(64,32,8,!1),this.A=0|O[0],this.B=0|O[1],this.C=0|O[2],this.D=0|O[3],this.E=0|O[4],this.F=0|O[5],this.G=0|O[6],this.H=0|O[7]}get(){const{A:e,B:n,C:t,D:r,E:o,F:i,G:s,H:a}=this;return[e,n,t,r,o,i,s,a]}set(e,n,t,r,o,i,s,a){this.A=0|e,this.B=0|n,this.C=0|t,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,n){for(let t=0;t<16;t++,n+=4)T[t]=e.getUint32(n,!1);for(let e=16;e<64;e++){const n=T[e-15],t=T[e-2],r=l(n,7)^l(n,18)^n>>>3,o=l(t,17)^l(t,19)^t>>>10;T[e]=o+T[e-7]+r+T[e-16]|0}let{A:t,B:r,C:o,D:i,E:s,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const n=u+(l(s,6)^l(s,11)^l(s,25))+((h=s)&a^~h&c)+k[e]+T[e]|0,f=(l(t,2)^l(t,13)^l(t,22))+A(t,r,o)|0;u=c,c=a,a=s,s=i+n|0,i=o,o=r,r=t,t=n+f|0}var h;t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(t,r,o,i,s,a,c,u)}roundClean(){T.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const I=b((()=>new P)),B=BigInt(2**32-1),U=BigInt(32);function N(e,n=!1){return n?{h:Number(e&B),l:Number(e>>U&B)}:{h:0|Number(e>>U&B),l:0|Number(e&B)}}const R=function(e,n=!1){let t=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=N(e[o],n);[t[o],r[o]]=[i,s]}return[t,r]},L=(e,n,t)=>e>>>t,C=(e,n,t)=>e<<32-t|n>>>t,$=(e,n,t)=>e>>>t|n<<32-t,_=(e,n,t)=>e<<32-t|n>>>t,F=(e,n,t)=>e<<64-t|n>>>t-32,D=(e,n,t)=>e>>>t-32|n<<64-t,H=function(e,n,t,r){const o=(n>>>0)+(r>>>0);return{h:e+t+(o/2**32|0)|0,l:0|o}},j=(e,n,t)=>(e>>>0)+(n>>>0)+(t>>>0),K=(e,n,t,r)=>n+t+r+(e/2**32|0)|0,z=(e,n,t,r)=>(e>>>0)+(n>>>0)+(t>>>0)+(r>>>0),q=(e,n,t,r,o)=>n+t+r+o+(e/2**32|0)|0,W=(e,n,t,r,o,i)=>n+t+r+o+i+(e/2**32|0)|0,V=(e,n,t,r,o)=>(e>>>0)+(n>>>0)+(t>>>0)+(r>>>0)+(o>>>0),[M,G]=(()=>R(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),Y=new Uint32Array(80),Z=new Uint32Array(80);class Q extends x{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:t,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[e,n,t,r,o,i,s,a,c,u,l,h,f,d,p,g]}set(e,n,t,r,o,i,s,a,c,u,l,h,f,d,p,g){this.Ah=0|e,this.Al=0|n,this.Bh=0|t,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,n){for(let t=0;t<16;t++,n+=4)Y[t]=e.getUint32(n),Z[t]=e.getUint32(n+=4);for(let e=16;e<80;e++){const n=0|Y[e-15],t=0|Z[e-15],r=$(n,t,1)^$(n,t,8)^L(n,t,7),o=_(n,t,1)^_(n,t,8)^C(n,t,7),i=0|Y[e-2],s=0|Z[e-2],a=$(i,s,19)^F(i,s,61)^L(i,s,6),c=_(i,s,19)^D(i,s,61)^C(i,s,6),u=z(o,c,Z[e-7],Z[e-16]),l=q(u,r,a,Y[e-7],Y[e-16]);Y[e]=0|l,Z[e]=0|u}let{Ah:t,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:w}=this;for(let e=0;e<80;e++){const n=$(l,h,14)^$(l,h,18)^F(l,h,41),m=_(l,h,14)^_(l,h,18)^D(l,h,41),b=l&f^~l&p,E=V(w,m,h&d^~h&g,G[e],Z[e]),v=W(E,y,n,b,M[e],Y[e]),S=0|E,x=$(t,r,28)^F(t,r,34)^F(t,r,39),A=_(t,r,28)^D(t,r,34)^D(t,r,39),k=t&o^t&s^o&s,O=r&i^r&a^i&a;y=0|p,w=0|g,p=0|f,g=0|d,f=0|l,d=0|h,({h:l,l:h}=H(0|c,0|u,0|v,0|S)),c=0|s,u=0|a,s=0|o,a=0|i,o=0|t,i=0|r;const T=j(S,A,O);t=K(T,v,x,k),r=0|T}({h:t,l:r}=H(0|this.Ah,0|this.Al,0|t,0|r)),({h:o,l:i}=H(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=H(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=H(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=H(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=H(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=H(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:w}=H(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(t,r,o,i,s,a,c,u,l,h,f,d,p,g,y,w)}roundClean(){Y.fill(0),Z.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const J=b((()=>new Q));function X(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function ee(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function ne(...e){const n=e=>e,t=(e,n)=>t=>e(n(t));return{encode:e.map((e=>e.encode)).reduceRight(t,n),decode:e.map((e=>e.decode)).reduce(t,n)}}function te(e){return{encode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("alphabet.encode input should be an array of numbers");return n.map((n=>{if(X(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]}))},decode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("alphabet.decode input should be array of strings");return n.map((n=>{if("string"!=typeof n)throw new Error(`alphabet.decode: not string element=${n}`);const t=e.indexOf(n);if(-1===t)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return t}))}}}function re(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("join.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return n.join(e)},decode:n=>{if("string"!=typeof n)throw new Error("join.decode input should be string");return n.split(e)}}}function oe(e,n="="){if(X(e),"string"!=typeof n)throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;t.length*e%8;)t.push(n);return t},decode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=t.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&t[r-1]===n;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,r)}}}function ie(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:n=>e(n)}}function se(e,n,t){if(n<2)throw new Error(`convertRadix: wrong from=${n}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach((e=>{if(X(e),e<0||e>=n)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let o=r;o<i.length;o++){const a=i[o],c=n*e+a;if(!Number.isSafeInteger(c)||n*e/n!==e||c-a!=n*e)throw new Error("convertRadix: carry overflow");e=c%t;const u=Math.floor(c/t);if(i[o]=u,!Number.isSafeInteger(u)||u*t+e!==c)throw new Error("convertRadix: carry overflow");s&&(u?s=!1:r=o)}if(o.push(e),s)break}for(let n=0;n<e.length-1&&0===e[n];n++)o.push(0);return o.reverse()}const ae=(e,n)=>n?ae(n,e%n):e,ce=(e,n)=>e+(n-ae(e,n));function ue(e,n,t,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(n<=0||n>32)throw new Error(`convertRadix2: wrong from=${n}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(ce(n,t)>32)throw new Error(`convertRadix2: carry overflow from=${n} to=${t} carryBits=${ce(n,t)}`);let o=0,i=0;const s=2**t-1,a=[];for(const r of e){if(X(r),r>=2**n)throw new Error(`convertRadix2: invalid data word=${r} from=${n}`);if(o=o<<n|r,i+n>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${n}`);for(i+=n;i>=t;i-=t)a.push((o>>i-t&s)>>>0);o&=2**i-1}if(o=o<<t-i&s,!r&&i>=n)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function le(e){return X(e),{encode:n=>{if(!ee(n))throw new Error("radix.encode input should be Uint8Array");return se(Array.from(n),256,e)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(se(n,e,256))}}}function he(e,n=!1){if(X(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ce(8,e)>32||ce(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!ee(t))throw new Error("radix2.encode input should be Uint8Array");return ue(Array.from(t),8,e,!n)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(ue(t,e,8,n))}}}function fe(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...n){try{return e.apply(null,n)}catch(e){}}}function de(e,n){if(X(e),"function"!=typeof n)throw new Error("checksum fn should be function");return{encode(t){if(!ee(t))throw new Error("checksum.encode: input should be Uint8Array");const r=n(t).slice(0,e),o=new Uint8Array(t.length+e);return o.set(t),o.set(r,t.length),o},decode(t){if(!ee(t))throw new Error("checksum.decode: input should be Uint8Array");const r=t.slice(0,-e),o=n(r).slice(0,e),i=t.slice(-e);for(let n=0;n<e;n++)if(o[n]!==i[n])throw new Error("Invalid checksum");return r}}}const pe={alphabet:te,chain:ne,checksum:de,convertRadix:se,convertRadix2:ue,radix:le,radix2:he,join:re,padding:oe},ge=(he(4),te("0123456789ABCDEF"),re(""),he(5),te("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),oe(5),re(""),he(5),te("0123456789ABCDEFGHIJKLMNOPQRSTUV"),oe(5),re(""),he(5),te("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),re(""),ie((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),he(6),te("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),oe(6),re(""),he(6),te("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),oe(6),re(""),he(6),te("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),re(""),e=>ne(le(58),te(e),re("")))("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),ye=e=>ne(de(4,(n=>e(e(n)))),ge),we=ne(te("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),re("")),me=[996825010,642813549,513874426,1027748829,705979059];function be(e){const n=e>>25;let t=(33554431&e)<<5;for(let e=0;e<me.length;e++)1==(n>>e&1)&&(t^=me[e]);return t}function Ee(e,n,t=1){const r=e.length;let o=1;for(let n=0;n<r;n++){const t=e.charCodeAt(n);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);o=be(o)^t>>5}o=be(o);for(let n=0;n<r;n++)o=be(o)^31&e.charCodeAt(n);for(let e of n)o=be(o)^e;for(let e=0;e<6;e++)o=be(o);return o^=t,we.encode(ue([o%2**30],30,5,!1))}function ve(e){const n="bech32"===e?1:734539939,t=he(5),r=t.decode,o=t.encode,i=fe(r);function s(e,t=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==t&&e.length>t)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${t})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),s=e.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=we.decode(s).slice(0,-6),c=Ee(i,a,n);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(e,t,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof t);const o=e.length+7+t.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);const i=e.toLowerCase(),s=Ee(i,t,n);return`${i}1${we.encode(t)}${s}`},decode:s,decodeToBytes:function(e){const{prefix:n,words:t}=s(e,!1);return{prefix:n,words:t,bytes:r(t)}},decodeUnsafe:fe(s),fromWords:r,fromWordsUnsafe:i,toWords:o}}const Se=ve("bech32"),xe=ve("bech32m"),Ae=e=>(new TextDecoder).decode(e),ke=e=>(new TextEncoder).encode(e),Oe=ne(he(4),te("0123456789abcdef"),re(""),ie((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));function Te(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function Pe(e){const n=Te(e),t=n.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:n,words:t}}function Ie(e){o(e,16,20,24,28,32)}const Be=e=>{const n=8-e.length/4;return new Uint8Array([I(e)[0]>>n<<n])};function Ue(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Wordlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),pe.chain(pe.checksum(1,Be),pe.radix2(11,!0),pe.alphabet(e))}function Ne(e,n=""){return function(e,n,t,o){const{c:s,dkLen:a,DK:c,PRF:l,PRFSalt:h}=function(e,n,t,o){i(e);const s=function(e,n){if(void 0!==n&&"[object Object]"!==m.call(n))throw new Error("Options should be object or undefined");return Object.assign({dkLen:32,asyncTick:10},n)}(0,o),{c:a,dkLen:c,asyncTick:u}=s;if(r(a),r(c),r(u),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=g(n),h=g(t),f=new Uint8Array(c),d=S.create(e,l),p=d._cloneInto().update(h);return{c:a,dkLen:c,asyncTick:u,DK:f,PRF:d,PRFSalt:p}}(e,n,t,{c:2048,dkLen:64});let f;const d=new Uint8Array(4),p=u(d),y=new Uint8Array(l.outputLen);for(let e=1,n=0;n<a;e++,n+=l.outputLen){const t=c.subarray(n,n+l.outputLen);p.setInt32(0,e,!1),(f=h._cloneInto(f)).update(d).digestInto(y),t.set(y.subarray(0,t.length));for(let e=1;e<s;e++){l._cloneInto(f).update(y).digestInto(y);for(let e=0;e<t.length;e++)t[e]^=y[e]}}return function(e,n,t,r,o){return e.destroy(),n.destroy(),r&&r.destroy(),o.fill(0),t}(l,h,c,f,y)}(J,Pe(e).nfkd,(e=>Te(`mnemonic${e}`))(n))}const Re="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n"),Le=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ce=Uint8Array.from({length:16},((e,n)=>n));let $e=[Ce],_e=[Ce.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let n of[$e,_e])n.push(n[e].map((e=>Le[e])));const Fe=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),De=$e.map(((e,n)=>e.map((e=>Fe[n][e])))),He=_e.map(((e,n)=>e.map((e=>Fe[n][e])))),je=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ke=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),ze=(e,n)=>e<<n|e>>>32-n;function qe(e,n,t,r){return 0===e?n^t^r:1===e?n&t|~n&r:2===e?(n|~t)^r:3===e?n&r|t&~r:n^(t|~r)}const We=new Uint32Array(16);class Ve extends x{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:t,h3:r,h4:o}=this;return[e,n,t,r,o]}set(e,n,t,r,o){this.h0=0|e,this.h1=0|n,this.h2=0|t,this.h3=0|r,this.h4=0|o}process(e,n){for(let t=0;t<16;t++,n+=4)We[t]=e.getUint32(n,!0);let t=0|this.h0,r=t,o=0|this.h1,i=o,s=0|this.h2,a=s,c=0|this.h3,u=c,l=0|this.h4,h=l;for(let e=0;e<5;e++){const n=4-e,f=je[e],d=Ke[e],p=$e[e],g=_e[e],y=De[e],w=He[e];for(let n=0;n<16;n++){const r=ze(t+qe(e,o,s,c)+We[p[n]]+f,y[n])+l|0;t=l,l=c,c=0|ze(s,10),s=o,o=r}for(let e=0;e<16;e++){const t=ze(r+qe(n,i,a,u)+We[g[e]]+d,w[e])+h|0;r=h,h=u,u=0|ze(a,10),a=i,i=t}}this.set(this.h1+s+u|0,this.h2+c+h|0,this.h3+l+r|0,this.h4+t+i|0,this.h0+o+a|0)}roundClean(){We.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Me=b((()=>new Ve)),Ge=(BigInt(0),BigInt(1)),Ye=BigInt(2);function Ze(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const Qe=Array.from({length:256},((e,n)=>n.toString(16).padStart(2,"0")));function Je(e){if(!Ze(e))throw new Error("Uint8Array expected");let n="";for(let t=0;t<e.length;t++)n+=Qe[e[t]];return n}function Xe(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const en={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function nn(e){return e>=en._0&&e<=en._9?e-en._0:e>=en._A&&e<=en._F?e-(en._A-10):e>=en._a&&e<=en._f?e-(en._a-10):void 0}function tn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const n=e.length,t=n/2;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const r=new Uint8Array(t);for(let n=0,o=0;n<t;n++,o+=2){const t=nn(e.charCodeAt(o)),i=nn(e.charCodeAt(o+1));if(void 0===t||void 0===i){const n=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+n+'" at index '+o)}r[n]=16*t+i}return r}function rn(e){return Xe(Je(e))}function on(e){if(!Ze(e))throw new Error("Uint8Array expected");return Xe(Je(Uint8Array.from(e).reverse()))}function sn(e,n){return tn(e.toString(16).padStart(2*n,"0"))}function an(e,n){return sn(e,n).reverse()}function cn(e,n,t){let r;if("string"==typeof n)try{r=tn(n)}catch(t){throw new Error(`${e} must be valid hex string, got "${n}". Cause: ${t}`)}else{if(!Ze(n))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(n)}const o=r.length;if("number"==typeof t&&o!==t)throw new Error(`${e} expected ${t} bytes, got ${o}`);return r}function un(...e){let n=0;for(let t=0;t<e.length;t++){const r=e[t];if(!Ze(r))throw new Error("Uint8Array expected");n+=r.length}let t=new Uint8Array(n),r=0;for(let n=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t}const ln=e=>(Ye<<BigInt(e-1))-Ge,hn=e=>new Uint8Array(e),fn=e=>Uint8Array.from(e);function dn(e,n,t){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof n||n<2)throw new Error("qByteLen must be a number");if("function"!=typeof t)throw new Error("hmacFn must be a function");let r=hn(e),o=hn(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...e)=>t(o,r,...e),c=(e=hn())=>{o=a(fn([0]),e),r=a(),0!==e.length&&(o=a(fn([1]),e),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const t=[];for(;e<n;){r=a();const n=r.slice();t.push(n),e+=r.length}return un(...t)};return(e,n)=>{let t;for(s(),c(e);!(t=n(u()));)c();return s(),t}}const pn={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Ze(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,n)=>n.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function gn(e,n,t={}){const r=(n,t,r)=>{const o=pn[t];if("function"!=typeof o)throw new Error(`Invalid validator "${t}", expected function`);const i=e[n];if(!(r&&void 0===i||o(i,e)))throw new Error(`Invalid param ${String(n)}=${i} (${typeof i}), expected ${t}`)};for(const[e,t]of Object.entries(n))r(e,t,!1);for(const[e,n]of Object.entries(t))r(e,n,!0);return e}const yn=BigInt(0),wn=BigInt(1),mn=BigInt(2),bn=BigInt(3),En=BigInt(4),vn=BigInt(5),Sn=BigInt(8);function xn(e,n){const t=e%n;return t>=yn?t:n+t}function An(e,n,t){if(t<=yn||n<yn)throw new Error("Expected power/modulo > 0");if(t===wn)return yn;let r=wn;for(;n>yn;)n&wn&&(r=r*e%t),e=e*e%t,n>>=wn;return r}function kn(e,n,t){let r=e;for(;n-- >yn;)r*=r,r%=t;return r}function On(e,n){if(e===yn||n<=yn)throw new Error(`invert: expected positive integers, got n=${e} mod=${n}`);let t=xn(e,n),r=n,o=yn,i=wn,s=wn,a=yn;for(;t!==yn;){const e=r/t,n=r%t,c=o-s*e,u=i-a*e;r=t,t=n,o=s,i=a,s=c,a=u}if(r!==wn)throw new Error("invert: does not exist");return xn(o,n)}BigInt(9),BigInt(16);const Tn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pn(e,n){const t=void 0!==n?n:e.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}function In(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const n=e.toString(2).length;return Math.ceil(n/8)}function Bn(e){const n=In(e);return n+Math.ceil(n/2)}const Un=BigInt(0),Nn=BigInt(1);function Rn(e){return gn(e.Fp,Tn.reduce(((e,n)=>(e[n]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),gn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pn(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:Ln,hexToBytes:Cn}=n,$n={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:n}=$n;if(e.length<2||2!==e[0])throw new n("Invalid signature integer tag");const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new n("Invalid signature integer: wrong length");if(128&r[0])throw new n("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new n("Invalid signature integer: unnecessary leading zero");return{d:Ln(r),l:e.subarray(t+2)}},toSig(e){const{Err:n}=$n,t="string"==typeof e?Cn(e):e;if(!Ze(t))throw new Error("ui8a expected");let r=t.length;if(r<2||48!=t[0])throw new n("Invalid signature tag");if(t[1]!==r-2)throw new n("Invalid signature: incorrect length");const{d:o,l:i}=$n._parseInt(t.subarray(2)),{d:s,l:a}=$n._parseInt(i);if(a.length)throw new n("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){const n=e=>8&Number.parseInt(e[0],16)?"00"+e:e,t=e=>{const n=e.toString(16);return 1&n.length?`0${n}`:n},r=n(t(e.s)),o=n(t(e.r)),i=r.length/2,s=o.length/2,a=t(i),c=t(s);return`30${t(s+i+4)}02${c}${o}02${a}${r}`}},_n=BigInt(0),Fn=BigInt(1),Dn=(BigInt(2),BigInt(3));function Hn(e){const n=function(e){const n=Rn(e);return gn(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}(e),{Fp:t,n:r}=n,o=t.BYTES+1,i=2*t.BYTES+1;function s(e){return xn(e,r)}function a(e){return On(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=function(e){const n=function(e){const n=Rn(e);gn(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:o}=n;if(t){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof t||"bigint"!=typeof t.beta||"function"!=typeof t.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...n})}(e),{Fp:t}=n,r=n.toBytes||((e,n,r)=>{const o=n.toAffine();return un(Uint8Array.from([4]),t.toBytes(o.x),t.toBytes(o.y))}),o=n.fromBytes||(e=>{const n=e.subarray(1);return{x:t.fromBytes(n.subarray(0,t.BYTES)),y:t.fromBytes(n.subarray(t.BYTES,2*t.BYTES))}});function i(e){const{a:r,b:o}=n,i=t.sqr(e),s=t.mul(i,e);return t.add(t.add(s,t.mul(e,r)),o)}if(!t.eql(t.sqr(n.Gy),i(n.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&_n<e&&e<n.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:t,nByteLength:r,wrapPrivateKey:o,n:i}=n;if(t&&"bigint"!=typeof e){if(Ze(e)&&(e=Je(e)),"string"!=typeof e||!t.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let s;try{s="bigint"==typeof e?e:rn(cn("private key",e,r))}catch(n){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return o&&(s=xn(s,i)),a(s),s}const u=new Map;function l(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,n,r){if(this.px=e,this.py=n,this.pz=r,null==e||!t.isValid(e))throw new Error("x required");if(null==n||!t.isValid(n))throw new Error("y required");if(null==r||!t.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:n,y:r}=e||{};if(!e||!t.isValid(n)||!t.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const o=e=>t.eql(e,t.ZERO);return o(n)&&o(r)?h.ZERO:new h(n,r,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const n=t.invertBatch(e.map((e=>e.pz)));return e.map(((e,t)=>e.toAffine(n[t]))).map(h.fromAffine)}static fromHex(e){const n=h.fromAffine(o(cn("pointHex",e)));return n.assertValidity(),n}static fromPrivateKey(e){return h.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(n.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!t.isValid(e)||!t.isValid(r))throw new Error("bad point: x or y not FE");const o=t.sqr(r),s=i(e);if(!t.eql(o,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(t.isOdd)return!t.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:n,py:r,pz:o}=this,{px:i,py:s,pz:a}=e,c=t.eql(t.mul(n,a),t.mul(i,o)),u=t.eql(t.mul(r,a),t.mul(s,o));return c&&u}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:e,b:r}=n,o=t.mul(r,Dn),{px:i,py:s,pz:a}=this;let c=t.ZERO,u=t.ZERO,l=t.ZERO,f=t.mul(i,i),d=t.mul(s,s),p=t.mul(a,a),g=t.mul(i,s);return g=t.add(g,g),l=t.mul(i,a),l=t.add(l,l),c=t.mul(e,l),u=t.mul(o,p),u=t.add(c,u),c=t.sub(d,u),u=t.add(d,u),u=t.mul(c,u),c=t.mul(g,c),l=t.mul(o,l),p=t.mul(e,p),g=t.sub(f,p),g=t.mul(e,g),g=t.add(g,l),l=t.add(f,f),f=t.add(l,f),f=t.add(f,p),f=t.mul(f,g),u=t.add(u,f),p=t.mul(s,a),p=t.add(p,p),f=t.mul(p,g),c=t.sub(c,f),l=t.mul(p,d),l=t.add(l,l),l=t.add(l,l),new h(c,u,l)}add(e){l(e);const{px:r,py:o,pz:i}=this,{px:s,py:a,pz:c}=e;let u=t.ZERO,f=t.ZERO,d=t.ZERO;const p=n.a,g=t.mul(n.b,Dn);let y=t.mul(r,s),w=t.mul(o,a),m=t.mul(i,c),b=t.add(r,o),E=t.add(s,a);b=t.mul(b,E),E=t.add(y,w),b=t.sub(b,E),E=t.add(r,i);let v=t.add(s,c);return E=t.mul(E,v),v=t.add(y,m),E=t.sub(E,v),v=t.add(o,i),u=t.add(a,c),v=t.mul(v,u),u=t.add(w,m),v=t.sub(v,u),d=t.mul(p,E),u=t.mul(g,m),d=t.add(u,d),u=t.sub(w,d),d=t.add(w,d),f=t.mul(u,d),w=t.add(y,y),w=t.add(w,y),m=t.mul(p,m),E=t.mul(g,E),w=t.add(w,m),m=t.sub(y,m),m=t.mul(p,m),E=t.add(E,m),y=t.mul(w,E),f=t.add(f,y),y=t.mul(v,E),u=t.mul(b,u),u=t.sub(u,y),y=t.mul(b,w),d=t.mul(v,d),d=t.add(d,y),new h(u,f,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,(e=>{const n=t.invertBatch(e.map((e=>e.pz)));return e.map(((e,t)=>e.toAffine(n[t]))).map(h.fromAffine)}))}multiplyUnsafe(e){const r=h.ZERO;if(e===_n)return r;if(a(e),e===Fn)return this;const{endo:o}=n;if(!o)return d.unsafeLadder(this,e);let{k1neg:i,k1:s,k2neg:c,k2:u}=o.splitScalar(e),l=r,f=r,p=this;for(;s>_n||u>_n;)s&Fn&&(l=l.add(p)),u&Fn&&(f=f.add(p)),p=p.double(),s>>=Fn,u>>=Fn;return i&&(l=l.negate()),c&&(f=f.negate()),f=new h(t.mul(f.px,o.beta),f.py,f.pz),l.add(f)}multiply(e){a(e);let r,o,i=e;const{endo:s}=n;if(s){const{k1neg:e,k1:n,k2neg:a,k2:c}=s.splitScalar(i);let{p:u,f:l}=this.wNAF(n),{p:f,f:p}=this.wNAF(c);u=d.constTimeNegate(e,u),f=d.constTimeNegate(a,f),f=new h(t.mul(f.px,s.beta),f.py,f.pz),r=u.add(f),o=l.add(p)}else{const{p:e,f:n}=this.wNAF(i);r=e,o=n}return h.normalizeZ([r,o])[0]}multiplyAndAddUnsafe(e,n,t){const r=h.BASE,o=(e,n)=>n!==_n&&n!==Fn&&e.equals(r)?e.multiply(n):e.multiplyUnsafe(n),i=o(this,n).add(o(e,t));return i.is0()?void 0:i}toAffine(e){const{px:n,py:r,pz:o}=this,i=this.is0();null==e&&(e=i?t.ONE:t.inv(o));const s=t.mul(n,e),a=t.mul(r,e),c=t.mul(o,e);if(i)return{x:t.ZERO,y:t.ZERO};if(!t.eql(c,t.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:t}=n;if(e===Fn)return!0;if(t)return t(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:t}=n;return e===Fn?this:t?t(h,this):this.multiplyUnsafe(n.h)}toRawBytes(e=!0){return this.assertValidity(),r(h,this,e)}toHex(e=!0){return Je(this.toRawBytes(e))}}h.BASE=new h(n.Gx,n.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const f=n.nBitLength,d=function(e,n){const t=(e,n)=>{const t=n.negate();return e?t:n},r=e=>({windows:Math.ceil(n/e)+1,windowSize:2**(e-1)});return{constTimeNegate:t,unsafeLadder(n,t){let r=e.ZERO,o=n;for(;t>Un;)t&Nn&&(r=r.add(o)),o=o.double(),t>>=Nn;return r},precomputeWindow(e,n){const{windows:t,windowSize:o}=r(n),i=[];let s=e,a=s;for(let e=0;e<t;e++){a=s,i.push(a);for(let e=1;e<o;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(n,o,i){const{windows:s,windowSize:a}=r(n);let c=e.ZERO,u=e.BASE;const l=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let e=0;e<s;e++){const n=e*a;let r=Number(i&l);i>>=f,r>a&&(r-=h,i+=Nn);const s=n,d=n+Math.abs(r)-1,p=e%2!=0,g=r<0;0===r?u=u.add(t(p,o[s])):c=c.add(t(g,o[d]))}return{p:c,f:u}},wNAFCached(e,n,t,r){const o=e._WINDOW_SIZE||1;let i=n.get(e);return i||(i=this.precomputeWindow(e,o),1!==o&&n.set(e,r(i))),this.wNAF(o,i,t)}}}(h,n.endo?Math.ceil(f/2):f);return{CURVE:n,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:s}}({...n,toBytes(e,n,r){const o=n.toAffine(),i=t.toBytes(o.x),s=un;return r?s(Uint8Array.from([n.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,t.toBytes(o.y))},fromBytes(e){const n=e.length,r=e[0],s=e.subarray(1);if(n!==o||2!==r&&3!==r){if(n===i&&4===r)return{x:t.fromBytes(s.subarray(0,t.BYTES)),y:t.fromBytes(s.subarray(t.BYTES,2*t.BYTES))};throw new Error(`Point of length ${n} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}{const e=rn(s);if(!(_n<(a=e)&&a<t.ORDER))throw new Error("Point is not on curve");const n=l(e);let o=t.sqrt(n);return 1==(1&r)!=((o&Fn)===Fn)&&(o=t.neg(o)),{x:e,y:o}}var a}}),f=e=>Je(sn(e,n.nByteLength));function d(e){return e>r>>Fn}const p=(e,n,t)=>rn(e.slice(n,t));class g{constructor(e,n,t){this.r=e,this.s=n,this.recovery=t,this.assertValidity()}static fromCompact(e){const t=n.nByteLength;return e=cn("compactSignature",e,2*t),new g(p(e,0,t),p(e,t,2*t))}static fromDER(e){const{r:n,s:t}=$n.toSig(cn("DER",e));return new g(n,t)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r,s:o,recovery:i}=this,u=b(cn("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const l=2===i||3===i?r+n.n:r;if(l>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&i)?"02":"03",d=c.fromHex(h+f(l)),p=a(l),g=s(-u*p),y=s(o*p),w=c.BASE.multiplyAndAddUnsafe(d,g,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return tn(this.toDERHex())}toDERHex(){return $n.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tn(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Bn(n.n);return function(e,n,t=!1){const r=e.length,o=In(n),i=Bn(n);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=xn(t?rn(e):on(e),n-wn)+wn;return t?an(s,o):sn(s,o)}(n.randomBytes(e),n.n)},precompute:(e=8,n=c.BASE)=>(n._setWindowSize(e),n.multiply(BigInt(3)),n)};function w(e){const n=Ze(e),t="string"==typeof e,r=(n||t)&&e.length;return n?r===o||r===i:t?r===2*o||r===2*i:e instanceof c}const m=n.bits2int||function(e){const t=rn(e),r=8*e.length-n.nBitLength;return r>0?t>>BigInt(r):t},b=n.bits2int_modN||function(e){return s(m(e))},E=ln(n.nBitLength);function v(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(_n<=e&&e<E))throw new Error(`bigint expected < 2^${n.nBitLength}`);return sn(e,n.nByteLength)}const S={lowS:n.lowS,prehash:!1},x={lowS:n.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:n,getPublicKey:function(e,n=!0){return c.fromPrivateKey(e).toRawBytes(n)},getSharedSecret:function(e,n,t=!0){if(w(e))throw new Error("first arg must be private key");if(!w(n))throw new Error("second arg must be public key");return c.fromHex(n).multiply(u(e)).toRawBytes(t)},sign:function(e,r,o=S){const{seed:i,k2sig:l}=function(e,r,o=S){if(["recovered","canonical"].some((e=>e in o)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:l}=n;let{lowS:f,prehash:p,extraEntropy:y}=o;null==f&&(f=!0),e=cn("msgHash",e),p&&(e=cn("prehashed msgHash",i(e)));const w=b(e),E=u(r),x=[v(E),v(w)];if(null!=y){const e=!0===y?l(t.BYTES):y;x.push(cn("extraEntropy",e))}const A=un(...x),k=w;return{seed:A,k2sig:function(e){const n=m(e);if(!h(n))return;const t=a(n),r=c.BASE.multiply(n).toAffine(),o=s(r.x);if(o===_n)return;const i=s(t*s(k+o*E));if(i===_n)return;let u=(r.x===o?0:2)|Number(r.y&Fn),l=i;return f&&d(i)&&(l=function(e){return d(e)?s(-e):e}(i),u^=1),new g(o,l,u)}}}(e,r,o),f=n;return dn(f.hash.outputLen,f.nByteLength,f.hmac)(i,l)},verify:function(e,t,r,o=x){const i=e;if(t=cn("msgHash",t),r=cn("publicKey",r),"strict"in o)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:l}=o;let h,f;try{if("string"==typeof i||Ze(i))try{h=g.fromDER(i)}catch(e){if(!(e instanceof $n.Err))throw e;h=g.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:n}=i;h=new g(e,n)}}f=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&h.hasHighS())return!1;l&&(t=n.hash(t));const{r:d,s:p}=h,y=b(t),w=a(p),m=s(y*w),E=s(d*w),v=c.BASE.multiplyAndAddUnsafe(f,m,E)?.toAffine();return!!v&&s(v.x)===d},ProjectivePoint:c,Signature:g,utils:y}}function jn(e){return{hash:e,hmac:(n,...t)=>S(e,n,y(...t)),randomBytes:E}}BigInt(4);const Kn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),qn=BigInt(1),Wn=BigInt(2),Vn=(e,n)=>(e+n/Wn)/n;function Mn(e){const n=Kn,t=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%n,l=u*u*e%n,h=kn(l,t,n)*l%n,f=kn(h,t,n)*l%n,d=kn(f,Wn,n)*u%n,p=kn(d,o,n)*d%n,g=kn(p,i,n)*p%n,y=kn(g,a,n)*g%n,w=kn(y,c,n)*y%n,m=kn(w,a,n)*g%n,b=kn(m,t,n)*l%n,E=kn(b,s,n)*p%n,v=kn(E,r,n)*u%n,S=kn(v,Wn,n);if(!Gn.eql(Gn.sqr(S),e))throw new Error("Cannot find square root");return S}const Gn=function(e,n,t=!1,r={}){if(e<=yn)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=Pn(e,n);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(e){if(e%En===bn){const n=(e+wn)/En;return function(e,t){const r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}}if(e%Sn===vn){const n=(e-vn)/Sn;return function(e,t){const r=e.mul(t,mn),o=e.pow(r,n),i=e.mul(t,o),s=e.mul(e.mul(i,mn),o),a=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}}return function(e){const n=(e-wn)/mn;let t,r,o;for(t=e-wn,r=0;t%mn===yn;t/=mn,r++);for(o=mn;o<e&&An(o,n,e)!==e-wn;o++);if(1===r){const n=(e+wn)/En;return function(e,t){const r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}}const i=(t+wn)/mn;return function(e,s){if(e.pow(s,n)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,o),t),u=e.pow(s,i),l=e.pow(s,t);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let n=1;for(let t=e.sqr(l);n<a&&!e.eql(t,e.ONE);n++)t=e.sqr(t);const t=e.pow(c,wn<<BigInt(a-n-1));c=e.sqr(t),u=e.mul(u,t),l=e.mul(l,c),a=n}return u}}(e)}(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:ln(o),ZERO:yn,ONE:wn,create:n=>xn(n,e),isValid:n=>{if("bigint"!=typeof n)throw new Error("Invalid field element: expected bigint, got "+typeof n);return yn<=n&&n<e},is0:e=>e===yn,isOdd:e=>(e&wn)===wn,neg:n=>xn(-n,e),eql:(e,n)=>e===n,sqr:n=>xn(n*n,e),add:(n,t)=>xn(n+t,e),sub:(n,t)=>xn(n-t,e),mul:(n,t)=>xn(n*t,e),pow:(e,n)=>function(e,n,t){if(t<yn)throw new Error("Expected power > 0");if(t===yn)return e.ONE;if(t===wn)return n;let r=e.ONE,o=n;for(;t>yn;)t&wn&&(r=e.mul(r,o)),o=e.sqr(o),t>>=wn;return r}(a,e,n),div:(n,t)=>xn(n*On(t,e),e),sqrN:e=>e*e,addN:(e,n)=>e+n,subN:(e,n)=>e-n,mulN:(e,n)=>e*n,inv:n=>On(n,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,n){const t=new Array(n.length),r=n.reduce(((n,r,o)=>e.is0(r)?n:(t[o]=n,e.mul(n,r))),e.ONE),o=e.inv(r);return n.reduceRight(((n,r,o)=>e.is0(r)?n:(t[o]=e.mul(n,t[o]),e.mul(n,r))),o),t}(a,e),cmov:(e,n,t)=>t?n:e,toBytes:e=>t?an(e,i):sn(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return t?on(e):rn(e)}});return Object.freeze(a)}(Kn,void 0,void 0,{sqrt:Mn}),Yn=function(e,n){const t=n=>Hn({...e,...jn(n)});return Object.freeze({...t(n),create:t})}({a:BigInt(0),b:BigInt(7),Fp:Gn,n:zn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const n=zn,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-qn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,s=BigInt("0x100000000000000000000000000000000"),a=Vn(i*e,n),c=Vn(-r*e,n);let u=xn(e-a*t-c*o,n),l=xn(-a*r-c*i,n);const h=u>s,f=l>s;if(h&&(u=n-u),f&&(l=n-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:f,k2:l}}}},I),Zn=BigInt(0),Qn=e=>"bigint"==typeof e&&Zn<e&&e<Kn,Jn=e=>"bigint"==typeof e&&Zn<e&&e<zn,Xn={};function et(e,...n){let t=Xn[e];if(void 0===t){const n=I(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=un(n,n),Xn[e]=t}return I(un(t,...n))}const nt=e=>e.toRawBytes(!0).slice(1),tt=e=>sn(e,32),rt=e=>xn(e,Kn),ot=e=>xn(e,zn),it=Yn.ProjectivePoint,st=(e,n,t)=>it.BASE.multiplyAndAddUnsafe(e,n,t);function at(e){let n=Yn.utils.normPrivateKeyToScalar(e),t=it.fromPrivateKey(n);return{scalar:t.hasEvenY()?n:ot(-n),bytes:nt(t)}}function ct(e){if(!Qn(e))throw new Error("bad x: need 0 < x < p");const n=rt(e*e);let t=Mn(rt(n*e+BigInt(7)));t%Wn!==Zn&&(t=rt(-t));const r=new it(e,t,qn);return r.assertValidity(),r}function ut(...e){return ot(rn(et("BIP0340/challenge",...e)))}function lt(e){return at(e).bytes}function ht(e,n,t=E(32)){const r=cn("message",e),{bytes:o,scalar:i}=at(n),s=cn("auxRand",t,32),a=tt(i^rn(et("BIP0340/aux",s))),c=et("BIP0340/nonce",a,o,r),u=ot(rn(c));if(u===Zn)throw new Error("sign failed: k is zero");const{bytes:l,scalar:h}=at(u),f=ut(l,o,r),d=new Uint8Array(64);if(d.set(l,0),d.set(tt(ot(h+f*i)),32),!ft(d,r,o))throw new Error("sign: Invalid signature produced");return d}function ft(e,n,t){const r=cn("signature",e,64),o=cn("message",n),i=cn("publicKey",t,32);try{const e=ct(rn(i)),n=rn(r.subarray(0,32));if(!Qn(n))return!1;const t=rn(r.subarray(32,64));if(!Jn(t))return!1;const s=ut(tt(n),nt(e),o),a=st(e,t,ot(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==n)}catch(e){return!1}}const dt=(()=>({getPublicKey:lt,sign:ht,verify:ft,utils:{randomPrivateKey:Yn.utils.randomPrivateKey,lift_x:ct,pointToBytes:nt,numberToBytesBE:sn,bytesToNumberBE:rn,taggedHash:et,mod:xn}}))(),pt=Yn.ProjectivePoint,gt=ye(I);function yt(e){return BigInt(`0x${function(e){if(!c(e))throw new Error("Uint8Array expected");let n="";for(let t=0;t<e.length;t++)n+=h[e[t]];return n}(e)}`)}const wt=p("Bitcoin seed"),mt={private:76066276,public:76067358},bt=2147483648,Et=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const n=new Uint8Array(4);return u(n).setUint32(0,e,!1),n};class vt{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,u(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return gt.encode(this.serialize(this.versions.private,y(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return gt.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,n=mt){if(o(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const t=S(J,wt,e);return new vt({versions:n,chainCode:t.slice(32),privateKey:t.slice(0,32)})}static fromExtendedKey(e,n=mt){const t=gt.decode(e),r=u(t),o=r.getUint32(0,!1),i={versions:n,depth:t[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:t.slice(13,45)},s=t.slice(45),a=0===s[0];if(o!==n[a?"private":"public"])throw new Error("Version mismatch");return new vt(a?{...i,privateKey:s.slice(1)}:{...i,publicKey:s})}static fromJSON(e){return vt.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||mt,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Yn.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:yt(e.privateKey),this.privKeyBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const n=e.length,t=n/2;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const r=new Uint8Array(t);for(let n=0,o=0;n<t;n++,o+=2){const t=d(e.charCodeAt(o)),i=d(e.charCodeAt(o+1));if(void 0===t||void 0===i){const n=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+n+'" at index '+o)}r[n]=16*t+i}return r}(this.privKey.toString(16).padStart(64,"0")),this.pubKey=Yn.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=pt.fromHex(e.publicKey).toRawBytes(!0)}var n;this.pubHash=(n=this.pubKey,Me(I(n)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let t=this;for(const e of n){const n=/^(\d+)('?)$/.exec(e),r=n&&n[1];if(!n||3!==n.length||"string"!=typeof r)throw new Error(`Invalid child index: ${e}`);let o=+r;if(!Number.isSafeInteger(o)||o>=bt)throw new Error("Invalid index");"'"===n[2]&&(o+=bt),t=t.deriveChild(o)}return t}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=Et(e);if(e>=bt){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");n=y(new Uint8Array([0]),e,n)}else n=y(this.pubKey,n);const t=S(J,this.chainCode,n),r=yt(t.slice(0,32)),o=t.slice(32);if(!Yn.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const i={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=xn(this.privKey+r,Yn.CURVE.n);if(!Yn.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");i.privateKey=e}else{const e=pt.fromHex(this.pubKey).add(pt.fromPrivateKey(r));if(e.equals(pt.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");i.publicKey=e.toRawBytes(!0)}return new vt(i)}catch(n){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return o(e,32),Yn.sign(e,this.privKey).toCompactRawBytes()}verify(e,n){if(o(e,32),o(n,64),!this.publicKey)throw new Error("No publicKey set!");let t;try{t=Yn.Signature.fromCompact(n)}catch(e){return!1}return Yn.verify(t,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,n){if(!this.chainCode)throw new Error("No chainCode set");return o(n,33),y(Et(e),new Uint8Array([this.depth]),Et(this.parentFingerprint),Et(this.index),this.chainCode,n)}}const St=new Uint8Array,xt=new Uint8Array([0]);function At(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function kt(...e){if(1===e.length)return e[0];const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);for(let n=0,r=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t}const Ot=e=>e instanceof Uint8Array,Tt={BITS:32,FULL_MASK:-1>>>0,len:e=>Math.ceil(e/32),create:e=>new Uint32Array(Tt.len(e)),clean:e=>e.fill(0),debug:e=>Array.from(e).map((e=>(e>>>0).toString(2).padStart(32,"0"))),checkLen:(e,n)=>{if(Tt.len(n)!==e.length)throw new Error(`bitSet: wrong length=${e.length}. Expected: ${Tt.len(n)}`)},chunkLen:(e,n,t)=>{if(n<0)throw new Error(`bitset: wrong pos=${n}`);if(n+t>e)throw new Error(`bitSet: wrong range=${n}/${t} of ${e}`)},set:(e,n,t,r=!0)=>!(!r&&0!=(e[n]&t)||(e[n]|=t,0)),pos:(e,n)=>({chunk:Math.floor((e+n)/32),mask:1<<32-(e+n)%32-1}),indices:(e,n,t=!1)=>{Tt.checkLen(e,n);const{FULL_MASK:r,BITS:o}=Tt,i=o-n%o,s=i?r>>>i<<i:r,a=[];for(let n=0;n<e.length;n++){let r=e[n];if(t&&(r=~r),n===e.length-1&&(r&=s),0!==r)for(let e=0;e<o;e++)r&1<<o-e-1&&a.push(n*o+e)}return a},range:e=>{const n=[];let t;for(const r of e)void 0===t||r!==t.pos+t.length?n.push(t={pos:r,length:1}):t.length+=1;return n},rangeDebug:(e,n,t=!1)=>`[${Tt.range(Tt.indices(e,n,t)).map((e=>`(${e.pos}/${e.length})`)).join(", ")}]`,setRange:(e,n,t,r,o=!0)=>{Tt.chunkLen(n,t,r);const{FULL_MASK:i,BITS:s}=Tt,a=t%s?Math.floor(t/s):void 0,c=t+r,u=c%s?Math.floor(c/s):void 0;if(void 0!==a&&a===u)return Tt.set(e,a,i>>>s-r<<s-r-t,o);if(void 0!==a&&!Tt.set(e,a,i>>>t%s,o))return!1;const l=void 0!==u?u:c/s;for(let n=void 0!==a?a+1:t/s;n<l;n++)if(!Tt.set(e,n,i,o))return!1;return!(void 0!==u&&a!==u&&!Tt.set(e,u,i<<s-c%s,o))}};class Pt{constructor(e,n={},t=[],r=[],o=void 0,i=0){this.data=e,this.opts=n,this.path=t,this.fieldPath=r,this.parent=o,this.parentOffset=i,this.pos=0,this.bitBuf=0,this.bitPos=0}enablePtr(){if(this.parent)return this.parent.enablePtr();this.bs||(this.bs=Tt.create(this.data.length),Tt.setRange(this.bs,this.data.length,0,this.pos,this.opts.allowMultipleReads))}markBytesBS(e,n){return this.parent?this.parent.markBytesBS(this.parentOffset+e,n):!n||!this.bs||Tt.setRange(this.bs,this.data.length,e,n,!1)}markBytes(e){const n=this.pos;this.pos+=e;const t=this.markBytesBS(n,e);if(!this.opts.allowMultipleReads&&!t)throw this.err(`multiple read pos=${this.pos} len=${e}`);return t}err(e){return new Error(`Reader(${this.fieldPath.join("/")}): ${e}`)}absBytes(e){if(e>this.data.length)throw new Error("absBytes: Unexpected end of buffer");return this.data.subarray(e)}offsetReader(e){return new Pt(this.absBytes(e),this.opts,this.path,this.fieldPath,this,e)}bytes(e,n=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(e))throw this.err(`readBytes: wrong length=${e}`);if(this.pos+e>this.data.length)throw this.err("readBytes: Unexpected end of buffer");const t=this.data.subarray(this.pos,this.pos+e);return n||this.markBytes(e),t}byte(e=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");const n=this.data[this.pos];return e||this.markBytes(1),n}get leftBytes(){return this.data.length-this.pos}isEnd(){return this.pos>=this.data.length&&!this.bitPos}length(e){let n;if(Lt(e)?n=Number(e.decodeStream(this)):"number"==typeof e?n=e:"string"==typeof e&&(n=Rt(this.path,e.split("/"))),"bigint"==typeof n&&(n=Number(n)),"number"!=typeof n)throw this.err(`Wrong length: ${n}`);return n}bits(e){if(e>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let n=0;for(;e;){this.bitPos||(this.bitBuf=this.byte(),this.bitPos=8);const t=Math.min(e,this.bitPos);this.bitPos-=t,n=n<<t|this.bitBuf>>this.bitPos&2**t-1,this.bitBuf&=2**this.bitPos-1,e-=t}return n>>>0}find(e,n=this.pos){if(!Ot(e))throw this.err(`find: needle is not bytes! ${e}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!e.length)throw this.err("find: needle is empty");for(let t=n;-1!==(t=this.data.indexOf(e[0],t));t++){if(-1===t)return;if(this.data.length-t<e.length)return;if(At(e,this.data.subarray(t,t+e.length)))return t}}finish(){if(!this.opts.allowUnreadBytes){if(this.bitPos)throw this.err(`${this.bitPos} bits left after unpack: ${Oe.encode(this.data.slice(this.pos))}`);if(!this.bs||this.parent){if(!this.isEnd())throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${Oe.encode(this.data.slice(this.pos))}`)}else{const e=Tt.indices(this.bs,this.data.length,!0);if(e.length){const n=Tt.range(e).map((({pos:e,length:n})=>`(${e}/${n})[${Oe.encode(this.data.subarray(e,e+n))}]`)).join(", ");throw this.err(`unread byte ranges: ${n} (total=${this.data.length})`)}}}}fieldPathPush(e){this.fieldPath.push(e)}fieldPathPop(){this.fieldPath.pop()}}class It{constructor(e=[],n=[]){this.path=e,this.fieldPath=n,this.buffers=[],this.pos=0,this.ptrs=[],this.bitBuf=0,this.bitPos=0}err(e){return new Error(`Writer(${this.fieldPath.join("/")}): ${e}`)}bytes(e){if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(e),this.pos+=e.length}byte(e){if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([e])),this.pos++}get buffer(){if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let e=kt(...this.buffers);for(let n of this.ptrs){const t=e.length;e=kt(e,n.buffer);const r=n.ptr.encode(t);for(let t=0;t<r.length;t++)e[n.pos+t]=r[t]}return e}length(e,n){if(null===e)return;if(Lt(e))return e.encodeStream(this,n);let t;if("number"==typeof e?t=e:"string"==typeof e&&(t=Rt(this.path,e.split("/"))),"bigint"==typeof t&&(t=Number(t)),void 0===t||t!==n)throw this.err(`Wrong length: ${t} len=${e} exp=${n}`)}bits(e,n){if(n>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(e>=2**n)throw this.err(`writeBits: value (${e}) >= 2**bits (${n})`);for(;n;){const t=Math.min(n,8-this.bitPos);this.bitBuf=this.bitBuf<<t|e>>n-t,this.bitPos+=t,e&=2**(n-=t)-1,8===this.bitPos&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}fieldPathPush(e){this.fieldPath.push(e)}fieldPathPop(){this.fieldPath.pop()}}const Bt=e=>Uint8Array.from(e).reverse();function Ut(e,n,t,r){if(r){const r=2n**(t-1n);if(n<-r||n>=r)throw e.err("sInt: value out of bounds")}else if(0n>n||n>=2n**t)throw e.err("uInt: value out of bounds")}function Nt(e){return{...e,encode:n=>{const t=new It;return e.encodeStream(t,n),t.buffer},decode:(n,t={})=>{const r=new Pt(n,t),o=e.decodeStream(r);return r.finish(),o}}}function Rt(e,n){e=Array.from(e);let t=0;for(;t<n.length&&".."===n[t];t++)e.pop();let r=e.pop();for(;t<n.length;t++){if(!r||void 0===r[n[t]])return;r=r[n[t]]}return r}function Lt(e){return"function"==typeof e.encode&&"function"==typeof e.encodeStream&&"function"==typeof e.decode&&"function"==typeof e.decodeStream}const Ct={dict:function(){return{encode:e=>{const n={};for(const[t,r]of e){if(void 0!==n[t])throw new Error(`coders.dict: same key(${t}) appears twice in struct`);n[t]=r}return n},decode:e=>Object.entries(e)}},number:{encode:e=>{if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`coders.number: element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>BigInt(e)},tsEnum:function(e){return{encode:n=>e[n],decode:n=>e[n]}},decimal:function(e){const n=10n**BigInt(e);return{encode:n=>{let t=(n<0n?-n:n).toString(10),r=t.length-e;r<0&&(t=t.padStart(t.length-r,"0"),r=0);let o=t.length-1;for(;o>=r&&"0"===t[o];o--);let[i,s]=[t.slice(0,r),t.slice(r,o+1)];return i||(i="0"),n<0n&&(i="-"+i),s?`${i}.${s}`:i},decode:t=>{let r=!1;t.startsWith("-")&&(r=!0,t=t.slice(1));let o=t.indexOf(".");o=-1===o?t.length:o;const[i,s]=[t.slice(0,o),t.slice(o+1)],a=BigInt(i)*n,c=Math.min(s.length,e),u=a+BigInt(s.slice(0,c))*10n**BigInt(e-c);return r?-u:u}}},match:function(e){return{encode:n=>{for(const t of e){const e=t.encode(n);if(void 0!==e)return e}throw new Error(`match/encode: cannot find match in ${n}`)},decode:n=>{for(const t of e){const e=t.decode(n);if(void 0!==e)return e}throw new Error(`match/decode: cannot find match in ${n}`)}}}},$t=(e,n=!1,t=!1)=>Nt({size:e,encodeStream:(r,o)=>{if("number"!=typeof o&&"bigint"!=typeof o)throw r.err(`bigint: invalid value: ${o}`);let i=BigInt(o);const s=BigInt(e);Ut(r,i,8n*s,!!t),t&&i<0&&(i|=2n**(8n*s-1n));let a=[];for(let n=0;n<e;n++)a.push(Number(255n&i)),i>>=8n;let c=new Uint8Array(a).reverse();r.bytes(n?c.reverse():c)},decodeStream:r=>{const o=BigInt(e);let i=r.bytes(e);n&&(i=Bt(i));const s=Bt(i),a=2n**(8n*o-1n);let c=0n;for(let e=0;e<s.length;e++)c|=BigInt(s[e])<<8n*BigInt(e);return t&&c&a&&(c=(c^a)-a),Ut(r,c,8n*o,!!t),c}}),_t=($t(32,!0),$t(32,!1)),Ft=($t(32,!0,!0),$t(32,!1,!0),$t(16,!0),$t(16,!1),$t(16,!0,!0),$t(16,!1,!0),$t(8,!0)),Dt=($t(8,!1),$t(8,!0,!0)),Ht=($t(8,!1,!0),(e,n=!1,t=!1)=>{if(e>6)throw new Error("int supports size up to 6 bytes (48 bits), for other use bigint");return Gt($t(e,n,t),Ct.number)}),jt=Ht(4,!0),Kt=Ht(4,!1),zt=Ht(4,!0,!0),qt=(Ht(4,!1,!0),Ht(2,!0)),Wt=(Ht(2,!1),Ht(2,!0,!0),Ht(2,!1,!0),Ht(1,!1)),Vt=(Ht(1,!1,!0),Nt({size:1,encodeStream:(e,n)=>e.byte(n?1:0),decodeStream:e=>{const n=e.byte();if(0!==n&&1!==n)throw e.err(`bool: invalid value ${n}`);return 1===n}}),(e,n=!1)=>Nt({size:"number"==typeof e?e:void 0,encodeStream:(t,r)=>{if(!Ot(r))throw t.err(`bytes: invalid value ${r}`);Ot(e)||t.length(e,r.length),t.bytes(n?Bt(r):r),Ot(e)&&t.bytes(e)},decodeStream:t=>{let r;if(Ot(e)){const n=t.find(e);if(!n)throw t.err("bytes: cannot find terminator");r=t.bytes(n-t.pos),t.bytes(e.length)}else r=t.bytes(null===e?t.leftBytes:t.length(e));return n?Bt(r):r}})),Mt=(e,n=!1)=>{const t=Vt(e,n);return Nt({size:t.size,encodeStream:(e,n)=>t.encodeStream(e,ke(n)),decodeStream:e=>Ae(t.decodeStream(e))})};function Gt(e,n){if(!Lt(e))throw new Error(`apply: invalid inner value ${e}`);return Nt({size:e.size,encodeStream:(t,r)=>{let o;try{o=n.decode(r)}catch(e){throw t.err(""+e)}return e.encodeStream(t,o)},decodeStream:t=>{const r=e.decodeStream(t);try{return n.encode(r)}catch(e){throw t.err(""+e)}}})}function Yt(e,n){if(!Lt(e))throw new Error(`validate: invalid inner value ${e}`);return Nt({size:e.size,encodeStream:(t,r)=>e.encodeStream(t,n(r)),decodeStream:t=>n(e.decodeStream(t))})}function Zt(e,n,t=!0){if(!Lt(e))throw new Error(`flagged: invalid inner value ${e}`);return Nt({size:e.size,encodeStream:(t,r)=>e.encodeStream(t,n),decodeStream:r=>{const o=e.decodeStream(r);if(t&&"object"!=typeof o&&o!==n||Ot(n)&&!At(n,o))throw r.err(`magic: invalid value: ${o} !== ${n}`)}})}function Qt(e){let n=0;for(let t of e){if(void 0===t.size)return;if(!Number.isSafeInteger(t.size))throw new Error(`sizeof: wrong element size=${n}`);n+=t.size}return n}function Jt(e){if(Array.isArray(e))throw new Error("Packed.Struct: got array instead of object");return Nt({size:Qt(Object.values(e)),encodeStream:(n,t)=>{if("object"!=typeof t||null===t)throw n.err(`struct: invalid value ${t}`);n.path.push(t);for(let r in e)n.fieldPathPush(r),e[r].encodeStream(n,t[r]),n.fieldPathPop();n.path.pop()},decodeStream:n=>{let t={};n.path.push(t);for(let r in e)n.fieldPathPush(r),t[r]=e[r].decodeStream(n),n.fieldPathPop();return n.path.pop(),t}})}function Xt(e,n){if(!Lt(n))throw new Error(`array: invalid inner value ${n}`);return Nt({size:"number"==typeof e&&n.size?e*n.size:void 0,encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`array: invalid value ${r}`);Ot(e)||t.length(e,r.length),t.path.push(r);for(let o=0;o<r.length;o++){t.fieldPathPush(""+o);const i=r[o],s=t.pos;if(n.encodeStream(t,i),Ot(e)){if(e.length>t.pos-s)continue;const n=t.buffer.subarray(s,t.pos);if(At(n.subarray(0,e.length),e))throw t.err(`array: inner element encoding same as separator. elm=${i} data=${n}`)}t.fieldPathPop()}t.path.pop(),Ot(e)&&t.bytes(e)},decodeStream:t=>{let r=[];if(null===e){let e=0;for(t.path.push(r);!(t.isEnd()||(t.fieldPathPush(""+e++),r.push(n.decodeStream(t)),t.fieldPathPop(),n.size&&t.leftBytes<n.size)););t.path.pop()}else if(Ot(e)){let o=0;for(t.path.push(r);;){if(At(t.bytes(e.length,!0),e)){t.bytes(e.length);break}t.fieldPathPush(""+o++),r.push(n.decodeStream(t)),t.fieldPathPop()}t.path.pop()}else{t.fieldPathPush("arrayLen");const o=t.length(e);t.fieldPathPop(),t.path.push(r);for(let e=0;e<o;e++)t.fieldPathPush(""+e),r.push(n.decodeStream(t)),t.fieldPathPop();t.path.pop()}return r}})}Mt(xt),Zt(Vt(0),St);const{ProjectivePoint:er,sign:nr,getPublicKey:tr}=Yn,rr=Yn.CURVE.n,or=(e,n)=>void 0===e?n:e,ir=Ot,sr=e=>Me(I(e)),ar=(...e)=>I(I(cr(...e))),cr=kt,ur=ye(I);function lr(e){if(Array.isArray(e))return e.map((e=>lr(e)));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(null===e)return e;if("object"==typeof e)return Object.fromEntries(Object.entries(e).map((([e,n])=>[e,lr(n)])));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var hr;function fr(e,n){const t=e.length;if(n===hr.ecdsa){if(32===t)throw new Error("Expected non-Schnorr key");return er.fromHex(e),e}if(n===hr.schnorr){if(32!==t)throw new Error("Expected 32-byte Schnorr key");return dt.utils.lift_x(dt.utils.bytesToNumberBE(e)),e}throw new Error("Unknown key type")}function dr(e,n){try{return fr(e,n),!0}catch(e){return!1}}!function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"}(hr||(hr={}));const pr=e=>e.r<rr/2n;function gr(e,n){const t=dt.utils,r=t.taggedHash("TapTweak",e,n),o=t.bytesToNumberBE(r);if(o>=rr)throw new Error("tweak higher than curve order");return o}const yr=Yt(Vt(null),(e=>fr(e,hr.ecdsa))),wr=Yt(Vt(32),(e=>fr(e,hr.schnorr))),mr=Yt(Vt(null),(e=>{if(64!==e.length&&65!==e.length)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e})),br={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128},Er=4294967295,vr=new Uint8Array(32);function Sr(e,n){if(!ir(e)||!ir(n))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof n}`);const t=Math.min(e.length,n.length);for(let r=0;r<t;r++)if(e[r]!=n[r])return Math.sign(e[r]-n[r]);return Math.sign(e.length-n.length)}var xr;Ct.decimal(8),function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"}(xr||(xr={}));const Ar=Nt({encodeStream:(e,n)=>{for(let t of n){if("string"==typeof t){if(void 0===xr[t])throw new Error(`Unknown opcode=${t}`);e.byte(xr[t]);continue}if("number"==typeof t){if(0===t){e.byte(0);continue}if(1<=t&&t<=16){e.byte(xr.OP_1-1+t);continue}}if("number"==typeof t&&(t=kr().encode(BigInt(t))),!ir(t))throw new Error(`Wrong Script OP=${t} (${typeof t})`);const n=t.length;n<xr.PUSHDATA1?e.byte(n):n<=255?(e.byte(xr.PUSHDATA1),e.byte(n)):n<=65535?(e.byte(xr.PUSHDATA2),e.bytes(qt.encode(n))):(e.byte(xr.PUSHDATA4),e.bytes(jt.encode(n))),e.bytes(t)}},decodeStream:e=>{const n=[];for(;!e.isEnd();){const t=e.byte();if(xr.OP_0<t&&t<=xr.PUSHDATA4){let r;if(t<xr.PUSHDATA1)r=t;else if(t===xr.PUSHDATA1)r=Wt.decodeStream(e);else if(t===xr.PUSHDATA2)r=qt.decodeStream(e);else{if(t!==xr.PUSHDATA4)throw new Error("Should be not possible");r=jt.decodeStream(e)}n.push(e.bytes(r))}else if(0===t)n.push(0);else if(xr.OP_1<=t&&t<=xr.OP_16)n.push(t-(xr.OP_1-1));else{const e=xr[t];if(void 0===e)throw new Error(`Unknown opcode=${t.toString(16)}`);n.push(e)}}return n}});function kr(e=6,n=!1){return Nt({encodeStream:(e,n)=>{if(0n===n)return;const t=n<0,r=BigInt(n),o=[];for(let e=t?-r:r;e;e>>=8n)o.push(Number(0xffn&e));o[o.length-1]>=128?o.push(t?128:0):t&&(o[o.length-1]|=128),e.bytes(new Uint8Array(o))},decodeStream:t=>{const r=t.leftBytes;if(r>e)throw new Error(`ScriptNum: number (${r}) bigger than limit=${e}`);if(0===r)return 0n;if(n&&0==(127&t.data[r-1])&&(r<=1||0==(128&t.data[r-2])))throw new Error("Non-minimally encoded ScriptNum");let o=0,i=0n;for(let e=0;e<r;++e)o=t.byte(),i|=BigInt(o)<<8n*BigInt(e);return o>=128&&(i&=2n**BigInt(8*r)-1n>>1n,i=-i),i}})}const Or={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},Tr=Nt({encodeStream:(e,n)=>{if("number"==typeof n&&(n=BigInt(n)),0n<=n&&n<=252n)return e.byte(Number(n));for(const[t,r,o,i]of Object.values(Or))if(!(o>n||n>i)){e.byte(t);for(let t=0;t<r;t++)e.byte(Number(n>>8n*BigInt(t)&0xffn));return}throw e.err(`VarInt too big: ${n}`)},decodeStream:e=>{const n=e.byte();if(n<=252)return BigInt(n);const[t,r,o]=Or[n];let i=0n;for(let n=0;n<r;n++)i|=BigInt(e.byte())<<8n*BigInt(n);if(i<o)throw e.err(`Wrong CompactSize(${8*r})`);return i}}),Pr=Gt(Tr,Ct.number),Ir=e=>Xt(Tr,e),Br=Vt(Tr),Ur=Jt({txid:Vt(32,!0),index:jt,finalScriptSig:Br,sequence:jt}),Nr=Jt({amount:Ft,script:Br}),Rr={amount:0xffffffffffffffffn,script:St},Lr=Xt(Pr,Br),Cr=Yt(Jt({version:zt,segwitFlag:((e,n=!1)=>Nt({size:e.length,encodeStream:(t,r)=>{!!r!==n&&t.bytes(e)},decodeStream:t=>{let r=t.leftBytes>=e.length;return r&&(r=At(t.bytes(e.length,!0),e),r&&t.bytes(e.length)),r!==n}}))(new Uint8Array([0,1])),inputs:Ir(Ur),outputs:Ir(Nr),witnesses:function(e,n,t){if(!Lt(n))throw new Error(`flagged: invalid inner value ${n}`);return Nt({encodeStream:(t,r)=>{Rt(t.path,e.split("/"))&&n.encodeStream(t,r)},decodeStream:t=>{let r=!1;if(r=Rt(t.path,e.split("/")),r)return n.decodeStream(t)}})}("segwitFlag",Xt("inputs/length",Lr)),lockTime:jt}),(function(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}));function $r(e){const[n,t,r,o,i,s]=e;return{type:n,kc:t,vc:r,reqInc:o,allowInc:i,silentIgnore:s}}const _r=Jt({fingerprint:Kt,path:Xt(null,jt)}),Fr=Yt(Jt({version:Wt,internalKey:Vt(32),merklePath:Xt(null,Vt(32))}),(e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e})),Dr=Jt({hashes:Xt(Pr,Vt(32)),der:_r}),Hr=Vt(78),jr=Jt({pubKey:wr,leafHash:Vt(32)}),Kr=Xt(null,Jt({depth:Wt,version:Wt,script:Br})),zr=Vt(null),qr=Vt(20),Wr=Vt(32),Vr={unsignedTx:[0,!1,Cr,[0],[0],!1],xpub:[1,Hr,_r,[],[0,2],!1],txVersion:[2,!1,jt,[2],[2],!1],fallbackLocktime:[3,!1,jt,[],[2],!1],inputCount:[4,!1,Pr,[2],[2],!1],outputCount:[5,!1,Pr,[2],[2],!1],txModifiable:[6,!1,Wt,[],[2],!1],version:[251,!1,jt,[],[0,2],!1],proprietary:[252,zr,zr,[],[0,2],!1]},Mr={nonWitnessUtxo:[0,!1,Cr,[],[0,2],!1],witnessUtxo:[1,!1,Nr,[],[0,2],!1],partialSig:[2,yr,zr,[],[0,2],!1],sighashType:[3,!1,jt,[],[0,2],!1],redeemScript:[4,!1,zr,[],[0,2],!1],witnessScript:[5,!1,zr,[],[0,2],!1],bip32Derivation:[6,yr,_r,[],[0,2],!1],finalScriptSig:[7,!1,zr,[],[0,2],!1],finalScriptWitness:[8,!1,Lr,[],[0,2],!1],porCommitment:[9,!1,zr,[],[0,2],!1],ripemd160:[10,qr,zr,[],[0,2],!1],sha256:[11,Wr,zr,[],[0,2],!1],hash160:[12,qr,zr,[],[0,2],!1],hash256:[13,Wr,zr,[],[0,2],!1],txid:[14,!1,Wr,[2],[2],!0],index:[15,!1,jt,[2],[2],!0],sequence:[16,!1,jt,[],[2],!0],requiredTimeLocktime:[17,!1,jt,[],[2],!1],requiredHeightLocktime:[18,!1,jt,[],[2],!1],tapKeySig:[19,!1,mr,[],[0,2],!1],tapScriptSig:[20,jr,mr,[],[0,2],!1],tapLeafScript:[21,Fr,zr,[],[0,2],!1],tapBip32Derivation:[22,Wr,Dr,[],[0,2],!1],tapInternalKey:[23,!1,wr,[],[0,2],!1],tapMerkleRoot:[24,!1,Wr,[],[0,2],!1],proprietary:[252,zr,zr,[],[0,2],!1]},Gr=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],Yr=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],Zr={redeemScript:[0,!1,zr,[],[0,2],!1],witnessScript:[1,!1,zr,[],[0,2],!1],bip32Derivation:[2,yr,_r,[],[0,2],!1],amount:[3,!1,Dt,[2],[2],!0],script:[4,!1,zr,[2],[2],!0],tapInternalKey:[5,!1,wr,[],[0,2],!1],tapTree:[6,!1,Kr,[],[0,2],!1],tapBip32Derivation:[7,wr,Dr,[],[0,2],!1],proprietary:[252,zr,zr,[],[0,2],!1]},Qr=[],Jr=Xt(xt,Jt({key:function(e,n){if(!Lt(n))throw new Error(`prefix: invalid inner value ${n}`);if(Ot(e))throw new Error("prefix: len cannot be Uint8Array");const t=Vt(e);return Nt({size:"number"==typeof e?e:void 0,encodeStream:(e,r)=>{const o=new It(e.path,e.fieldPath);n.encodeStream(o,r),t.encodeStream(e,o.buffer)},decodeStream:e=>{const r=t.decodeStream(e),o=new Pt(r,e.opts,e.path,e.fieldPath),i=n.decodeStream(o);return o.finish(),i}})}(Pr,Jt({type:Pr,key:Vt(null)})),value:Vt(Pr)}));function Xr(e){const n={};for(const t in e){const[r,o,i]=e[t];n[r]=[t,o,i]}return Nt({encodeStream:(n,t)=>{let r=[];for(const n in e){const o=t[n];if(void 0===o)continue;const[i,s,a]=e[n];if(s){const e=o.map((([e,n])=>[s.encode(e),a.encode(n)]));e.sort(((e,n)=>Sr(e[0],n[0])));for(const[n,t]of e)r.push({key:{key:n,type:i},value:t})}else r.push({key:{type:i,key:St},value:a.encode(o)})}if(t.unknown){t.unknown.sort(((e,n)=>Sr(e[0].key,n[0].key)));for(const[e,n]of t.unknown)r.push({key:e,value:n})}Jr.encodeStream(n,r)},decodeStream:e=>{const t=Jr.decodeStream(e),r={},o={};for(const e of t){let t="unknown",i=e.key.key,s=e.value;if(n[e.key.type]){const[a,c,u]=n[e.key.type];if(t=a,!c&&i.length)throw new Error(`PSBT: Non-empty key for ${t} (key=${Oe.encode(i)} value=${Oe.encode(s)}`);if(i=c?c.decode(i):void 0,s=u.decode(s),!c){if(r[t])throw new Error(`PSBT: Same keys: ${t} (key=${i} value=${s})`);r[t]=s,o[t]=!0;continue}}else i={type:e.key.type,key:e.key.key};if(o[t])throw new Error(`PSBT: Key type with empty key and no key=${t} val=${s}`);r[t]||(r[t]=[]),r[t].push([i,s])}return r}})}function eo(e,n){if(!At(e.hash,I(n)))throw new Error("checkScript: wsh wrong witnessScript hash");const t=xo.decode(n);if("tr"===t.type||"tr_ns"===t.type||"tr_ms"===t.type)throw new Error(`checkScript: P2${t.type} cannot be wrapped in P2SH`);if("wpkh"===t.type||"sh"===t.type)throw new Error(`checkScript: P2${t.type} cannot be wrapped in P2WSH`)}function no(e,n,t){if(e){const r=xo.decode(e);if("tr_ns"===r.type||"tr_ms"===r.type||"ms"===r.type||"pk"==r.type)throw new Error(`checkScript: non-wrapped ${r.type}`);if("sh"===r.type&&n){if(!At(r.hash,sr(n)))throw new Error("checkScript: sh wrong redeemScript hash");const e=xo.decode(n);if("tr"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)throw new Error(`checkScript: P2${e.type} cannot be wrapped in P2SH`);if("sh"===e.type)throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}"wsh"===r.type&&t&&eo(r,t)}if(n){const e=xo.decode(n);"wsh"===e.type&&t&&eo(e,t)}}Jt({type:Pr,key:Vt(null)});const to=Yt(Xr(Mr),(e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(const[n]of e.partialSig)fr(n,hr.ecdsa);if(e.bip32Derivation)for(const[n]of e.bip32Derivation)fr(n,hr.ecdsa);if(void 0!==e.requiredTimeLocktime&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(void 0!==e.requiredHeightLocktime&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&void 0!==e.index){const n=e.nonWitnessUtxo.outputs.length-1;if(e.index>n)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);const t=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!At(e.witnessUtxo.script,t.script)||e.witnessUtxo.amount!==t.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(const[n,t]of e.tapLeafScript){if((254&n.version)!==t[t.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(1&t[t.length-1])throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&void 0!==e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");const n=Ho.fromRaw(Cr.encode(e.nonWitnessUtxo),{allowUnknownOutputs:!0,disableScriptCheck:!0,allowUnknownInputs:!0}),t=Oe.encode(e.txid);if(n.isFinal&&n.id!==t)throw new Error(`nonWitnessUtxo: wrong txid, exp=${t} got=${n.id}`)}return e})),ro=Yt(Xr(Zr),(e=>{if(e.bip32Derivation)for(const[n]of e.bip32Derivation)fr(n,hr.ecdsa);return e})),oo=Yt(Xr(Vr),(e=>{if(0===(e.version||0)){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(const n of e.unsignedTx.inputs)if(n.finalScriptSig&&n.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e})),io=Jt({magic:Zt(Mt(new Uint8Array([255])),"psbt"),global:oo,inputs:Xt("global/unsignedTx/inputs/length",to),outputs:Xt(null,ro)}),so=Jt({magic:Zt(Mt(new Uint8Array([255])),"psbt"),global:oo,inputs:Xt("global/inputCount",to),outputs:Xt("global/outputCount",ro)});function ao(e,n,t){for(const r in t){if("unknown"===r)continue;if(!n[r])continue;const{allowInc:t}=$r(n[r]);if(!t.includes(e))throw new Error(`PSBTv${e}: field ${r} is not allowed`)}for(const r in n){const{reqInc:o}=$r(n[r]);if(o.includes(e)&&void 0===t[r])throw new Error(`PSBTv${e}: missing required field ${r}`)}}function co(e,n,t){const r={};for(const o in t){const i=o;if("unknown"!==i){if(!n[i])continue;const{allowInc:t,silentIgnore:r}=$r(n[i]);if(!t.includes(e)){if(r)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${i} but versions allows inclusion=${t}`)}}r[i]=t[i]}return r}function uo(e){const n=e&&e.global&&e.global.version||0;ao(n,Vr,e.global);for(const t of e.inputs)ao(n,Mr,t);for(const t of e.outputs)ao(n,Zr,t);const t=n?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<t)throw new Error("Not enough inputs");const r=e.inputs.slice(t);if(r.length>1||r.length&&Object.keys(r[0]).length)throw new Error(`Unexpected inputs left in tx=${r}`);const o=n?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<o)throw new Error("Not outputs inputs");const i=e.outputs.slice(o);if(i.length>1||i.length&&Object.keys(i[0]).length)throw new Error(`Unexpected outputs left in tx=${i}`);return e}function lo(e,n,t,r){const o={...t,...n};for(const i in e){const s=i,[a,c,u]=e[s],l=r&&!r.includes(i);if(void 0===n[i]&&i in n){if(l)throw new Error(`Cannot remove signed field=${i}`);delete o[i]}else if(c){const e=t&&t[i]?t[i]:[];let r=n[s];if(r){if(!Array.isArray(r))throw new Error(`keyMap(${i}): KV pairs should be [k, v][]`);r=r.map((e=>{if(2!==e.length)throw new Error(`keyMap(${i}): KV pairs should be [k, v][]`);return["string"==typeof e[0]?c.decode(Oe.decode(e[0])):e[0],"string"==typeof e[1]?u.decode(Oe.decode(e[1])):e[1]]}));const n={},t=(e,t,r)=>{if(void 0===n[e])return void(n[e]=[t,r]);const o=Oe.encode(u.encode(n[e][1])),i=Oe.encode(u.encode(r));if(o!==i)throw new Error(`keyMap(${s}): same key=${e} oldVal=${o} newVal=${i}`)};for(const[n,r]of e)t(Oe.encode(c.encode(n)),n,r);for(const[e,o]of r){const r=Oe.encode(c.encode(e));if(void 0===o){if(l)throw new Error(`Cannot remove signed field=${s}/${e}`);delete n[r]}else t(r,e,o)}o[s]=Object.values(n)}}else if("string"==typeof o[i])o[i]=u.decode(Oe.decode(o[i]));else if(l&&i in n&&t&&void 0!==t[i]&&!At(u.encode(n[i]),u.encode(t[i])))throw new Error(`Cannot change signed field=${i}`)}for(const n in o)e[n]||delete o[n];return o}Jt({magic:Zt(Mt(new Uint8Array([255])),"psbt"),items:Xt(null,Gt(Xt(xt,function(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);return Nt({size:Qt(e),encodeStream:(n,t)=>{if(!Array.isArray(t))throw n.err(`tuple: invalid value ${t}`);n.path.push(t);for(let r=0;r<e.length;r++)n.fieldPathPush(""+r),e[r].encodeStream(n,t[r]),n.fieldPathPop();n.path.pop()},decodeStream:n=>{let t=[];n.path.push(t);for(let r=0;r<e.length;r++)n.fieldPathPush(""+r),t.push(e[r].decodeStream(n)),n.fieldPathPop();return n.path.pop(),t}})}([((e,n=!1,t=!1)=>{const r=Vt(e,n);return Nt({size:r.size,encodeStream:(e,n)=>{if(t&&!n.startsWith("0x"))throw new Error("hex(withZero=true).encode input should start with 0x");const o=Oe.decode(t?n.slice(2):n);return r.encodeStream(e,o)},decodeStream:e=>(t?"0x":"")+Oe.encode(r.decodeStream(e))})})(Pr),Vt(Tr)])),Ct.dict()))});const ho=Yt(io,uo),fo=Yt(so,uo),po=Jt({txid:Vt(32,!0),index:jt}),go={encode(e){if(2===e.length&&ir(e[0])&&dr(e[0],hr.ecdsa)&&"CHECKSIG"===e[1])return{type:"pk",pubkey:e[0]}},decode:e=>"pk"===e.type?[e.pubkey,"CHECKSIG"]:void 0},yo={encode(e){if(5===e.length&&"DUP"===e[0]&&"HASH160"===e[1]&&ir(e[2])&&"EQUALVERIFY"===e[3]&&"CHECKSIG"===e[4])return{type:"pkh",hash:e[2]}},decode:e=>"pkh"===e.type?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0},wo={encode(e){if(3===e.length&&"HASH160"===e[0]&&ir(e[1])&&"EQUAL"===e[2])return{type:"sh",hash:e[1]}},decode:e=>"sh"===e.type?["HASH160",e.hash,"EQUAL"]:void 0},mo={encode(e){if(2===e.length&&0===e[0]&&ir(e[1])&&32===e[1].length)return{type:"wsh",hash:e[1]}},decode:e=>"wsh"===e.type?[0,e.hash]:void 0},bo={encode(e){if(2===e.length&&0===e[0]&&ir(e[1])&&20===e[1].length)return{type:"wpkh",hash:e[1]}},decode:e=>"wpkh"===e.type?[0,e.hash]:void 0},Eo={encode(e){const n=e.length-1;if("CHECKMULTISIG"!==e[n])return;const t=e[0],r=e[n-1];if("number"!=typeof t||"number"!=typeof r)return;const o=e.slice(1,-2);if(r===o.length){for(const e of o)if(!ir(e))return;return{type:"ms",m:t,pubkeys:o}}},decode:e=>"ms"===e.type?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0},vo={encode(e){if(2===e.length&&1===e[0]&&ir(e[1]))return{type:"tr",pubkey:e[1]}},decode:e=>"tr"===e.type?[1,e.pubkey]:void 0};I(er.BASE.toRawBytes(!1));const So=[go,yo,wo,mo,bo,Eo,vo,{encode(e){const n=e.length-1;if("CHECKSIG"!==e[n])return;const t=[];for(let r=0;r<n;r++){const o=e[r];if(1&r){if("CHECKSIGVERIFY"!==o||r===n-1)return}else{if(!ir(o))return;t.push(o)}}return{type:"tr_ns",pubkeys:t}},decode:e=>{if("tr_ns"!==e.type)return;const n=[];for(let t=0;t<e.pubkeys.length-1;t++)n.push(e.pubkeys[t],"CHECKSIGVERIFY");return n.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),n}},{encode(e){const n=e.length-1;if("NUMEQUAL"!==e[n]||"CHECKSIG"!==e[1])return;const t=[],r=function(e,n=4,t=!0){if("number"==typeof e)return e;if(ir(e))try{const r=kr(n,t).decode(e);if(r>Number.MAX_SAFE_INTEGER)return;return Number(r)}catch(e){return}}(e[n-1]);if("number"==typeof r){for(let r=0;r<n-1;r++){const n=e[r];if(1&r){if(n!==(1===r?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element")}else{if(!ir(n))throw new Error("OutScript.encode/tr_ms: wrong key element");t.push(n)}}return{type:"tr_ms",pubkeys:t,m:r}}},decode:e=>{if("tr_ms"!==e.type)return;const n=[e.pubkeys[0],"CHECKSIG"];for(let t=1;t<e.pubkeys.length;t++)n.push(e.pubkeys[t],"CHECKSIGADD");return n.push(e.m,"NUMEQUAL"),n}},{encode:e=>({type:"unknown",script:Ar.encode(e)}),decode:e=>"unknown"===e.type?Ar.decode(e.script):void 0}],xo=Yt(Gt(Ar,Ct.match(So)),(e=>{if("pk"===e.type&&!dr(e.pubkey,hr.ecdsa))throw new Error("OutScript/pk: wrong key");if(!("pkh"!==e.type&&"sh"!==e.type&&"wpkh"!==e.type||ir(e.hash)&&20===e.hash.length))throw new Error(`OutScript/${e.type}: wrong hash`);if("wsh"===e.type&&(!ir(e.hash)||32!==e.hash.length))throw new Error("OutScript/wsh: wrong hash");if(!("tr"!==e.type||ir(e.pubkey)&&dr(e.pubkey,hr.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if(("ms"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if("ms"===e.type){const n=e.pubkeys.length;for(const n of e.pubkeys)if(!dr(n,hr.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||n>16||e.m>n)throw new Error("OutScript/multisig: invalid params")}if("tr_ns"===e.type||"tr_ms"===e.type)for(const n of e.pubkeys)if(!dr(n,hr.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`);if("tr_ms"===e.type){const n=e.pubkeys.length;if(e.m<=0||n>999||e.m>n)throw new Error("OutScript/tr_ms: invalid params")}return e}));function Ao(e,n){if(n.length<2||n.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(0===e&&20!==n.length&&32!==n.length)throw new Error("Witness: invalid length for version")}function ko(e,n,t=br){Ao(e,n);const r=0===e?Se:xe;return r.encode(t.bech32,[e].concat(r.toWords(n)))}function Oo(e,n){return ur.encode(cr(Uint8Array.from(n),e))}function To(e=br){return{encode(n){const{type:t}=n;if("wpkh"===t)return ko(0,n.hash,e);if("wsh"===t)return ko(0,n.hash,e);if("tr"===t)return ko(1,n.pubkey,e);if("pkh"===t)return Oo(n.hash,[e.pubKeyHash]);if("sh"===t)return Oo(n.hash,[e.scriptHash]);throw new Error(`Unknown address type=${t}`)},decode(n){if(n.length<14||n.length>74)throw new Error("Invalid address length");if(e.bech32&&n.toLowerCase().startsWith(e.bech32)){let t;try{if(t=Se.decode(n),0!==t.words[0])throw new Error(`bech32: wrong version=${t.words[0]}`)}catch(e){if(t=xe.decode(n),0===t.words[0])throw new Error(`bech32m: wrong version=${t.words[0]}`)}if(t.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${t.prefix}`);const[r,...o]=t.words,i=Se.fromWords(o);if(Ao(r,i),0===r&&32===i.length)return{type:"wsh",hash:i};if(0===r&&20===i.length)return{type:"wpkh",hash:i};if(1===r&&32===i.length)return{type:"tr",pubkey:i};throw new Error("Unknown witness program")}const t=ur.decode(n);if(21!==t.length)throw new Error("Invalid base58 address");if(t[0]===e.pubKeyHash)return{type:"pkh",hash:t.slice(1)};if(t[0]===e.scriptHash)return{type:"sh",hash:t.slice(1)};throw new Error(`Invalid address prefix=${t[0]}`)}}}var Po,Io;function Bo(e){if("number"!=typeof e||"string"!=typeof Io[e])throw new Error(`Invalid SigHash=${e}`);return e}function Uo(e){const n=31&e;return{isAny:!!(e&Po.ANYONECANPAY),isNone:n===Po.NONE,isSingle:n===Po.SINGLE}}function No(e){if(void 0===e.txid||void 0===e.index)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:or(e.sequence,Er),finalScriptSig:or(e.finalScriptSig,St)}}function Ro(e){for(const n in e){const t=n;Gr.includes(t)||delete e[t]}}function Lo(e){if(void 0===e.script||void 0===e.amount)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"}(Po||(Po={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"}(Io||(Io={}));const Co=(e,n=192)=>dt.utils.taggedHash("TapLeaf",new Uint8Array([n]),Br.encode(e));const $o={}.toString;function _o(e){if(e.nonWitnessUtxo){if(void 0===e.index)throw new Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}if(e.witnessUtxo)return e.witnessUtxo;throw new Error("Cannot find previous output info")}function Fo(e,n,t,r=!1){let{nonWitnessUtxo:o,txid:i}=e;"string"==typeof o&&(o=Oe.decode(o)),ir(o)&&(o=Cr.decode(o)),"nonWitnessUtxo"in e||void 0!==o||(o=n?.nonWitnessUtxo),"string"==typeof i&&(i=Oe.decode(i)),void 0===i&&(i=n?.txid);let s,a={...n,...e,nonWitnessUtxo:o,txid:i};return"nonWitnessUtxo"in e||void 0!==a.nonWitnessUtxo||delete a.nonWitnessUtxo,void 0===a.sequence&&(a.sequence=Er),null===a.tapMerkleRoot&&delete a.tapMerkleRoot,a=lo(Mr,a,n,t),to.encode(a),a.nonWitnessUtxo&&void 0!==a.index?s=a.nonWitnessUtxo.outputs[a.index]:a.witnessUtxo&&(s=a.witnessUtxo),s&&!r&&no(s&&s.script,a.redeemScript,a.witnessScript),a}function Do(e,n=!1){let t="legacy",r=Po.ALL;const o=_o(e),i=xo.decode(o.script);let s=i.type,a=i;const c=[i];if("tr"===i.type)return r=Po.DEFAULT,{txType:"taproot",type:"tr",last:i,lastScript:o.script,defaultSighash:r,sighash:e.sighashType||r};{if("wpkh"!==i.type&&"wsh"!==i.type||(t="segwit"),"sh"===i.type){if(!e.redeemScript)throw new Error("inputType: sh without redeemScript");let n=xo.decode(e.redeemScript);"wpkh"!==n.type&&"wsh"!==n.type||(t="segwit"),c.push(n),a=n,s+=`-${n.type}`}if("wsh"===a.type){if(!e.witnessScript)throw new Error("inputType: wsh without witnessScript");let n=xo.decode(e.witnessScript);"wsh"===n.type&&(t="segwit"),c.push(n),a=n,s+=`-${n.type}`}const o=c[c.length-1];if("sh"===o.type||"wsh"===o.type)throw new Error("inputType: sh/wsh cannot be terminal type");const u={type:s,txType:t,last:o,lastScript:xo.encode(o),defaultSighash:r,sighash:e.sighashType||r};if("legacy"===t&&!n&&!e.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return u}}class Ho{constructor(e={}){this.global={},this.inputs=[],this.outputs=[];const n=this.opts=function(e){if(void 0!==e&&"[object Object]"!==$o.call(e))throw new Error(`Wrong object type for transaction options: ${e}`);const n={...e,version:or(e.version,2),lockTime:or(e.lockTime,0),PSBTVersion:or(e.PSBTVersion,0)};if(void 0!==n.allowUnknowInput&&(e.allowUnknownInputs=n.allowUnknowInput),void 0!==n.allowUnknowOutput&&(e.allowUnknownOutputs=n.allowUnknowOutput),![-1,0,1,2].includes(n.version))throw new Error(`Unknown version: ${n.version}`);if("number"!=typeof n.lockTime)throw new Error("Transaction lock time should be number");if(jt.encode(n.lockTime),0!==n.PSBTVersion&&2!==n.PSBTVersion)throw new Error(`Unknown PSBT version ${n.PSBTVersion}`);for(const e of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){const t=n[e];if(void 0!==t&&"boolean"!=typeof t)throw new Error(`Transation options wrong type: ${e}=${t} (${typeof t})`)}return Object.freeze(n)}(e);0!==n.lockTime&&(this.global.fallbackLocktime=n.lockTime),this.global.txVersion=n.version}static fromRaw(e,n={}){const t=Cr.decode(e),r=new Ho({...n,version:t.version,lockTime:t.lockTime});for(const e of t.outputs)r.addOutput(e);if(r.outputs=t.outputs,r.inputs=t.inputs,t.witnesses)for(let e=0;e<t.witnesses.length;e++)r.inputs[e].finalScriptWitness=t.witnesses[e];return r}static fromPSBT(e,n={}){let t;try{t=ho.decode(e)}catch(n){try{t=fo.decode(e)}catch(e){throw n}}const r=t.global.version||0;if(0!==r&&2!==r)throw new Error(`Wrong PSBT version=${r}`);const o=t.global.unsignedTx,i=0===r?o?.version:t.global.txVersion,s=0===r?o?.lockTime:t.global.fallbackLocktime,a=new Ho({...n,version:i,lockTime:s,PSBTVersion:r}),c=0===r?o?.inputs.length:t.global.inputCount;a.inputs=t.inputs.slice(0,c).map(((e,n)=>({finalScriptSig:St,...t.global.unsignedTx?.inputs[n],...e})));const u=0===r?o?.outputs.length:t.global.outputCount;return a.outputs=t.outputs.slice(0,u).map(((e,n)=>({...e,...t.global.unsignedTx?.outputs[n]}))),a.global={...t.global,txVersion:i},0!==s&&(a.global.fallbackLocktime=s),a}toPSBT(e=this.opts.PSBTVersion){if(0!==e&&2!==e)throw new Error(`Wrong PSBT version=${e}`);const n=this.inputs.map((n=>co(e,Mr,n)));for(const e of n)e.partialSig&&!e.partialSig.length&&delete e.partialSig,e.finalScriptSig&&!e.finalScriptSig.length&&delete e.finalScriptSig,e.finalScriptWitness&&!e.finalScriptWitness.length&&delete e.finalScriptWitness;const t=this.outputs.map((n=>co(e,Zr,n))),r={...this.global};return 0===e?(r.unsignedTx=Cr.decode(this.unsignedTx),delete r.fallbackLocktime,delete r.txVersion):(r.version=e,r.txVersion=this.version,r.inputCount=this.inputs.length,r.outputCount=this.outputs.length,r.fallbackLocktime&&0===r.fallbackLocktime&&delete r.fallbackLocktime),this.opts.bip174jsCompat&&(n.length||n.push({}),t.length||t.push({})),(0===e?ho:fo).encode({global:r,inputs:n,outputs:t})}get lockTime(){let e=0,n=0,t=0,r=0;for(const o of this.inputs)o.requiredHeightLocktime&&(e=Math.max(e,o.requiredHeightLocktime),n++),o.requiredTimeLocktime&&(t=Math.max(t,o.requiredTimeLocktime),r++);return n&&n>=r?e:0!==t?t:this.global.fallbackLocktime||0}get version(){if(void 0===this.global.txVersion)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(e){this.checkInputIdx(e);const n=this.inputs[e];return n.finalScriptSig&&n.finalScriptSig.length||n.finalScriptWitness&&n.finalScriptWitness.length?"finalized":n.tapKeySig||n.tapScriptSig&&n.tapScriptSig.length||n.partialSig&&n.partialSig.length?"signed":"unsigned"}inputSighash(e){this.checkInputIdx(e);const n=Do(this.inputs[e],this.opts.allowLegacyWitnessUtxo).sighash,t=n===Po.DEFAULT?Po.ALL:3&n;return{sigInputs:n&Po.ANYONECANPAY,sigOutputs:t}}signStatus(){let e=!0,n=!0,t=[],r=[];for(let o=0;o<this.inputs.length;o++){if("unsigned"===this.inputStatus(o))continue;const{sigInputs:i,sigOutputs:s}=this.inputSighash(o);if(i===Po.ANYONECANPAY?t.push(o):e=!1,s===Po.ALL)n=!1;else if(s===Po.SINGLE)r.push(o);else if(s!==Po.NONE)throw new Error(`Wrong signature hash output type: ${s}`)}return{addInput:e,addOutput:n,inputs:t,outputs:r}}get isFinal(){for(let e=0;e<this.inputs.length;e++)if("finalized"!==this.inputStatus(e))return!1;return!0}get hasWitnesses(){let e=!1;for(const n of this.inputs)n.finalScriptWitness&&n.finalScriptWitness.length&&(e=!0);return e}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let e=32;const n=this.outputs.map(Lo);e+=4*Pr.encode(this.outputs.length).length;for(const t of n)e+=32+4*Br.encode(t.script).length;this.hasWitnesses&&(e+=2),e+=4*Pr.encode(this.inputs.length).length;for(const n of this.inputs)e+=160+4*Br.encode(n.finalScriptSig||St).length,this.hasWitnesses&&n.finalScriptWitness&&(e+=Lr.encode(n.finalScriptWitness).length);return e}get vsize(){return e=this.weight,Math.ceil(e/4);var e}toBytes(e=!1,n=!1){return Cr.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(No).map((n=>({...n,finalScriptSig:e&&n.finalScriptSig||St}))),outputs:this.outputs.map(Lo),witnesses:this.inputs.map((e=>e.finalScriptWitness||[])),segwitFlag:n&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return Oe.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Oe.encode(ar(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Oe.encode(ar(this.toBytes(!0)).reverse())}checkInputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.inputs.length)throw new Error(`Wrong input index=${e}`)}getInput(e){return this.checkInputIdx(e),lr(this.inputs[e])}get inputsLength(){return this.inputs.length}addInput(e,n=!1){if(!n&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(Fo(e,void 0,void 0,this.opts.disableScriptCheck)),this.inputs.length-1}updateInput(e,n,t=!1){let r;if(this.checkInputIdx(e),!t){const n=this.signStatus();n.addInput&&!n.inputs.includes(e)||(r=Yr)}this.inputs[e]=Fo(n,this.inputs[e],r,this.opts.disableScriptCheck)}checkOutputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.outputs.length)throw new Error(`Wrong output index=${e}`)}getOutput(e){return this.checkOutputIdx(e),lr(this.outputs[e])}get outputsLength(){return this.outputs.length}normalizeOutput(e,n,t){let{amount:r,script:o}=e;if(void 0===r&&(r=n?.amount),"bigint"!=typeof r)throw new Error("amount must be bigint sats");"string"==typeof o&&(o=Oe.decode(o)),void 0===o&&(o=n?.script);let i={...n,...e,amount:r,script:o};if(void 0===i.amount&&delete i.amount,i=lo(Zr,i,n,t),ro.encode(i),i.script&&!this.opts.allowUnknownOutputs&&"unknown"===xo.decode(i.script).type)throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return this.opts.disableScriptCheck||no(i.script,i.redeemScript,i.witnessScript),i}addOutput(e,n=!1){if(!n&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(e)),this.outputs.length-1}updateOutput(e,n,t=!1){let r;if(this.checkOutputIdx(e),!t){const n=this.signStatus();n.addOutput&&!n.outputs.includes(e)||(r=Qr)}this.outputs[e]=this.normalizeOutput(n,this.outputs[e],r)}addOutputAddress(e,n,t=br){return this.addOutput({script:xo.encode(To(t).decode(e)),amount:n})}get fee(){let e=0n;for(const n of this.inputs){const t=_o(n);if(!t)throw new Error("Empty input amount");e+=t.amount}const n=this.outputs.map(Lo);for(const t of n)e-=t.amount;return e}preimageLegacy(e,n,t){const{isAny:r,isNone:o,isSingle:i}=Uo(t);if(e<0||!Number.isSafeInteger(e))throw new Error(`Invalid input idx=${e}`);if(i&&e>=this.outputs.length||e>=this.inputs.length)return _t.encode(1n);n=Ar.encode(Ar.decode(n).filter((e=>"CODESEPARATOR"!==e)));let s=this.inputs.map(No).map(((t,r)=>({...t,finalScriptSig:r===e?n:St})));r?s=[s[e]]:(o||i)&&(s=s.map(((n,t)=>({...n,sequence:t===e?n.sequence:0}))));let a=this.outputs.map(Lo);o?a=[]:i&&(a=a.slice(0,e).fill(Rr).concat([a[e]]));const c=Cr.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:s,outputs:a});return ar(c,zt.encode(t))}preimageWitnessV0(e,n,t,r){const{isAny:o,isNone:i,isSingle:s}=Uo(t);let a=vr,c=vr,u=vr;const l=this.inputs.map(No),h=this.outputs.map(Lo);o||(a=ar(...l.map(po.encode))),o||s||i||(c=ar(...l.map((e=>jt.encode(e.sequence))))),s||i?s&&e<h.length&&(u=ar(Nr.encode(h[e]))):u=ar(...h.map(Nr.encode));const f=l[e];return ar(zt.encode(this.version),a,c,Vt(32,!0).encode(f.txid),jt.encode(f.index),Br.encode(n),Ft.encode(r),jt.encode(f.sequence),u,jt.encode(this.lockTime),jt.encode(t))}preimageWitnessV1(e,n,t,r,o=-1,i,s=192,a){if(!Array.isArray(r)||this.inputs.length!==r.length)throw new Error(`Invalid amounts array=${r}`);if(!Array.isArray(n)||this.inputs.length!==n.length)throw new Error(`Invalid prevOutScript array=${n}`);const c=[Wt.encode(0),Wt.encode(t),zt.encode(this.version),jt.encode(this.lockTime)],u=t===Po.DEFAULT?Po.ALL:3&t,l=t&Po.ANYONECANPAY,h=this.inputs.map(No),f=this.outputs.map(Lo);l!==Po.ANYONECANPAY&&c.push(...[h.map(po.encode),r.map(Ft.encode),n.map(Br.encode),h.map((e=>jt.encode(e.sequence)))].map((e=>I(cr(...e))))),u===Po.ALL&&c.push(I(cr(...f.map(Nr.encode))));const d=(a?1:0)|(i?2:0);if(c.push(new Uint8Array([d])),l===Po.ANYONECANPAY){const t=h[e];c.push(po.encode(t),Ft.encode(r[e]),Br.encode(n[e]),jt.encode(t.sequence))}else c.push(jt.encode(e));return 1&d&&c.push(I(Br.encode(a||St))),u===Po.SINGLE&&c.push(e<f.length?I(Nr.encode(f[e])):vr),i&&c.push(Co(i,s),Wt.encode(0),zt.encode(o)),dt.utils.taggedHash("TapSighash",...c)}signIdx(e,n,t,r){this.checkInputIdx(n);const o=this.inputs[n],i=Do(o,this.opts.allowLegacyWitnessUtxo);if(!ir(e)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw new Error("bip32Derivation: empty");const t=o.bip32Derivation.filter((n=>n[1].fingerprint==e.fingerprint)).map((([n,{path:t}])=>{let r=e;for(const e of t)r=r.deriveChild(e);if(!At(r.publicKey,n))throw new Error("bip32Derivation: wrong pubKey");if(!r.privateKey)throw new Error("bip32Derivation: no privateKey");return r}));if(!t.length)throw new Error(`bip32Derivation: no items with fingerprint=${e.fingerprint}`);let r=!1;for(const e of t)this.signIdx(e.privateKey,n)&&(r=!0);return r}t?t.forEach(Bo):t=[i.defaultSighash];const s=i.sighash;if(!t.includes(s))throw new Error(`Input with not allowed sigHash=${s}. Allowed: ${t.join(", ")}`);const{sigOutputs:a}=this.inputSighash(n);if(a===Po.SINGLE&&n>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${n}`);const c=_o(o);if("taproot"===i.txType){if(o.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");const t=this.inputs.map(_o),i=t.map((e=>e.script)),a=t.map((e=>e.amount));let c=!1,u=dt.getPublicKey(e),l=o.tapMerkleRoot||St;if(o.tapInternalKey){const{pubKey:t,privKey:h}=function(e,n,t,r=St){return At(t,n)&&(e=function(e,n=new Uint8Array){const t=dt.utils,r=t.bytesToNumberBE(e),o=er.fromPrivateKey(r),i=o.hasEvenY()?r:t.mod(-r,rr),s=gr(t.pointToBytes(o),n);return t.numberToBytesBE(t.mod(i+s,rr),32)}(e,r),n=dt.getPublicKey(e)),{privKey:e,pubKey:n}}(e,u,o.tapInternalKey,l),[f,d]=function(e,n){const t=dt.utils,r=gr(e,n),o=t.lift_x(t.bytesToNumberBE(e)).add(er.fromPrivateKey(r)),i=o.hasEvenY()?0:1;return[t.pointToBytes(o),i]}(o.tapInternalKey,l);if(At(f,t)){const e=this.preimageWitnessV1(n,i,s,a),t=cr(dt.sign(e,h,r),s!==Po.DEFAULT?new Uint8Array([s]):St);this.updateInput(n,{tapKeySig:t},!0),c=!0}}if(o.tapLeafScript){o.tapScriptSig=o.tapScriptSig||[];for(const[t,l]of o.tapLeafScript){const t=l.subarray(0,-1),o=Ar.decode(t),h=l[l.length-1],f=Co(t,h);if(-1===o.findIndex((e=>ir(e)&&At(e,u))))continue;const d=this.preimageWitnessV1(n,i,s,a,void 0,t,h),p=cr(dt.sign(d,e,r),s!==Po.DEFAULT?new Uint8Array([s]):St);this.updateInput(n,{tapScriptSig:[[{pubKey:u,leafHash:f},p]]},!0),c=!0}}if(!c)throw new Error("No taproot scripts signed");return!0}{const t=tr(e);let r=!1;const o=sr(t);for(const e of Ar.decode(i.lastScript))ir(e)&&(At(e,t)||At(e,o))&&(r=!0);if(!r)throw new Error(`Input script doesn't have pubKey: ${i.lastScript}`);let a;if("legacy"===i.txType)a=this.preimageLegacy(n,i.lastScript,s);else{if("segwit"!==i.txType)throw new Error(`Transaction/sign: unknown tx type: ${i.txType}`);{let e=i.lastScript;"wpkh"===i.last.type&&(e=xo.encode({type:"pkh",hash:i.last.hash})),a=this.preimageWitnessV0(n,e,s,c.amount)}}const u=function(e,n,t=!1){let r=nr(e,n);if(t&&!pr(r)){const t=new Uint8Array(32);for(let o=0;o<Number.MAX_SAFE_INTEGER&&(t.set(jt.encode(o)),r=nr(e,n,{extraEntropy:t}),!pr(r));o++);}return r.toDERRawBytes()}(a,e,this.opts.lowR);this.updateInput(n,{partialSig:[[t,cr(u,new Uint8Array([s]))]]},!0)}return!0}sign(e,n,t){let r=0;for(let o=0;o<this.inputs.length;o++)try{this.signIdx(e,o,n,t)&&r++}catch(e){}if(!r)throw new Error("No inputs signed");return r}finalizeIdx(e){if(this.checkInputIdx(e),this.fee<0n)throw new Error("Outputs spends more than inputs amount");const n=this.inputs[e],t=Do(n,this.opts.allowLegacyWitnessUtxo);if("taproot"===t.txType){if(n.tapKeySig)n.finalScriptWitness=[n.tapKeySig];else{if(!n.tapLeafScript||!n.tapScriptSig)throw new Error("finalize/taproot: unknown input");{const e=n.tapLeafScript.sort(((e,n)=>Fr.encode(e[0]).length-Fr.encode(n[0]).length));for(const[t,r]of e){const e=r.slice(0,-1),o=r[r.length-1],i=xo.decode(e),s=Co(e,o),a=n.tapScriptSig.filter((e=>At(e[0].leafHash,s)));let c=[];if("tr_ms"===i.type){const e=i.m,n=i.pubkeys;let t=0;for(const r of n){const n=a.findIndex((e=>At(e[0].pubKey,r)));t!==e&&-1!==n?(c.push(a[n][1]),t++):c.push(St)}if(t!==e)continue}else if("tr_ns"===i.type){for(const e of i.pubkeys){const n=a.findIndex((n=>At(n[0].pubKey,e)));-1!==n&&c.push(a[n][1])}if(c.length!==i.pubkeys.length)continue}else{if("unknown"!==i.type||!this.opts.allowUnknownInputs)throw new Error("Finalize: Unknown tapLeafScript");{const n=Ar.decode(e);if(c=a.map((([{pubKey:e},t])=>{const r=n.findIndex((n=>ir(n)&&At(n,e)));if(-1===r)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:t,pos:r}})).sort(((e,n)=>e.pos-n.pos)).map((e=>e.signature)),!c.length)continue}}n.finalScriptWitness=c.reverse().concat([e,Fr.encode(t)]);break}if(!n.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}}return n.finalScriptSig=St,void Ro(n)}if(!n.partialSig||!n.partialSig.length)throw new Error("Not enough partial sign");let r,o,i=St,s=[];if("ms"===t.last.type){const e=t.last.m,r=t.last.pubkeys;let o=[];for(const e of r){const t=n.partialSig.find((n=>At(e,n[0])));t&&o.push(t[1])}if(o=o.slice(0,e),o.length!==e)throw new Error(`Multisig: wrong signatures count, m=${e} n=${r.length} signatures=${o.length}`);i=Ar.encode([0,...o])}else if("pk"===t.last.type)i=Ar.encode([n.partialSig[0][1]]);else if("pkh"===t.last.type)i=Ar.encode([n.partialSig[0][1],n.partialSig[0][0]]);else if("wpkh"===t.last.type)i=St,s=[n.partialSig[0][1],n.partialSig[0][0]];else if("unknown"===t.last.type&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");if(t.type.includes("wsh-")&&(i.length&&t.lastScript.length&&(s=Ar.decode(i).map((e=>{if(0===e)return St;if(ir(e))return e;throw new Error(`Wrong witness op=${e}`)}))),s=s.concat(t.lastScript)),"segwit"===t.txType&&(o=s),t.type.startsWith("sh-wsh-")?r=Ar.encode([Ar.encode([0,I(t.lastScript)])]):t.type.startsWith("sh-")?r=Ar.encode([...Ar.decode(i),t.lastScript]):t.type.startsWith("wsh-")||"segwit"!==t.txType&&(r=i),!r&&!o)throw new Error("Unknown error finalizing input");r&&(n.finalScriptSig=r),o&&(n.finalScriptWitness=o),Ro(n)}finalize(){for(let e=0;e<this.inputs.length;e++)this.finalizeIdx(e)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(e){for(const n of["PSBTVersion","version","lockTime"])if(this.opts[n]!==e.opts[n])throw new Error(`Transaction/combine: different ${n} this=${this.opts[n]} other=${e.opts[n]}`);for(const n of["inputs","outputs"])if(this[n].length!==e[n].length)throw new Error(`Transaction/combine: different ${n} length this=${this[n].length} other=${e[n].length}`);if(!At(this.global.unsignedTx?Cr.encode(this.global.unsignedTx):St,e.global.unsignedTx?Cr.encode(e.global.unsignedTx):St))throw new Error("Transaction/combine: different unsigned tx");this.global=lo(Vr,this.global,e.global);for(let n=0;n<this.inputs.length;n++)this.updateInput(n,e.inputs[n],!0);for(let n=0;n<this.outputs.length;n++)this.updateOutput(n,e.outputs[n],!0);return this}clone(){return Ho.fromPSBT(this.toPSBT(this.opts.PSBTVersion),this.opts)}}function jo(e,n){return function(){return e.apply(n,arguments)}}const{toString:Ko}=Object.prototype,{getPrototypeOf:zo}=Object,qo=(Wo=Object.create(null),e=>{const n=Ko.call(e);return Wo[n]||(Wo[n]=n.slice(8,-1).toLowerCase())});var Wo;const Vo=e=>(e=e.toLowerCase(),n=>qo(n)===e),Mo=e=>n=>typeof n===e,{isArray:Go}=Array,Yo=Mo("undefined"),Zo=Vo("ArrayBuffer"),Qo=Mo("string"),Jo=Mo("function"),Xo=Mo("number"),ei=e=>null!==e&&"object"==typeof e,ni=e=>{if("object"!==qo(e))return!1;const n=zo(e);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in e||Symbol.iterator in e)},ti=Vo("Date"),ri=Vo("File"),oi=Vo("Blob"),ii=Vo("FileList"),si=Vo("URLSearchParams");function ai(e,n,{allOwnKeys:t=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),Go(e))for(r=0,o=e.length;r<o;r++)n.call(null,e[r],r,e);else{const o=t?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(r=0;r<i;r++)s=o[r],n.call(null,e[s],s,e)}}function ci(e,n){n=n.toLowerCase();const t=Object.keys(e);let r,o=t.length;for(;o-- >0;)if(r=t[o],n===r.toLowerCase())return r;return null}const ui="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,li=e=>!Yo(e)&&e!==ui,hi=(fi="undefined"!=typeof Uint8Array&&zo(Uint8Array),e=>fi&&e instanceof fi);var fi;const di=Vo("HTMLFormElement"),pi=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),gi=Vo("RegExp"),yi=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};ai(t,((t,o)=>{let i;!1!==(i=n(t,o,e))&&(r[o]=i||t)})),Object.defineProperties(e,r)},wi="abcdefghijklmnopqrstuvwxyz",mi="0123456789",bi={DIGIT:mi,ALPHA:wi,ALPHA_DIGIT:wi+wi.toUpperCase()+mi},Ei=Vo("AsyncFunction"),vi={isArray:Go,isArrayBuffer:Zo,isBuffer:function(e){return null!==e&&!Yo(e)&&null!==e.constructor&&!Yo(e.constructor)&&Jo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let n;return e&&("function"==typeof FormData&&e instanceof FormData||Jo(e.append)&&("formdata"===(n=qo(e))||"object"===n&&Jo(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let n;return n="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Zo(e.buffer),n},isString:Qo,isNumber:Xo,isBoolean:e=>!0===e||!1===e,isObject:ei,isPlainObject:ni,isUndefined:Yo,isDate:ti,isFile:ri,isBlob:oi,isRegExp:gi,isFunction:Jo,isStream:e=>ei(e)&&Jo(e.pipe),isURLSearchParams:si,isTypedArray:hi,isFileList:ii,forEach:ai,merge:function e(){const{caseless:n}=li(this)&&this||{},t={},r=(r,o)=>{const i=n&&ci(t,o)||o;ni(t[i])&&ni(r)?t[i]=e(t[i],r):ni(r)?t[i]=e({},r):Go(r)?t[i]=r.slice():t[i]=r};for(let e=0,n=arguments.length;e<n;e++)arguments[e]&&ai(arguments[e],r);return t},extend:(e,n,t,{allOwnKeys:r}={})=>(ai(n,((n,r)=>{t&&Jo(n)?e[r]=jo(n,t):e[r]=n}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},toFlatObject:(e,n,t,r)=>{let o,i,s;const a={};if(n=n||{},null==e)return n;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,n)||a[s]||(n[s]=e[s],a[s]=!0);e=!1!==t&&zo(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},kindOf:qo,kindOfTest:Vo,endsWith:(e,n,t)=>{e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return-1!==r&&r===t},toArray:e=>{if(!e)return null;if(Go(e))return e;let n=e.length;if(!Xo(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},forEachEntry:(e,n)=>{const t=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=t.next())&&!r.done;){const t=r.value;n.call(e,t[0],t[1])}},matchAll:(e,n)=>{let t;const r=[];for(;null!==(t=e.exec(n));)r.push(t);return r},isHTMLForm:di,hasOwnProperty:pi,hasOwnProp:pi,reduceDescriptors:yi,freezeMethods:e=>{yi(e,((n,t)=>{if(Jo(e)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;const r=e[t];Jo(r)&&(n.enumerable=!1,"writable"in n?n.writable=!1:n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")}))}))},toObjectSet:(e,n)=>{const t={},r=e=>{e.forEach((e=>{t[e]=!0}))};return Go(e)?r(e):r(String(e).split(n)),t},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,n,t){return n.toUpperCase()+t})),noop:()=>{},toFiniteNumber:(e,n)=>(e=+e,Number.isFinite(e)?e:n),findKey:ci,global:ui,isContextDefined:li,ALPHABET:bi,generateString:(e=16,n=bi.ALPHA_DIGIT)=>{let t="";const{length:r}=n;for(;e--;)t+=n[Math.random()*r|0];return t},isSpecCompliantForm:function(e){return!!(e&&Jo(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const n=new Array(10),t=(e,r)=>{if(ei(e)){if(n.indexOf(e)>=0)return;if(!("toJSON"in e)){n[r]=e;const o=Go(e)?[]:{};return ai(e,((e,n)=>{const i=t(e,r+1);!Yo(i)&&(o[n]=i)})),n[r]=void 0,o}}return e};return t(e,0)},isAsyncFn:Ei,isThenable:e=>e&&(ei(e)||Jo(e))&&Jo(e.then)&&Jo(e.catch)};function Si(e,n,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o)}vi.inherits(Si,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:vi.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xi=Si.prototype,Ai={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ai[e]={value:e}})),Object.defineProperties(Si,Ai),Object.defineProperty(xi,"isAxiosError",{value:!0}),Si.from=(e,n,t,r,o,i)=>{const s=Object.create(xi);return vi.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Si.call(s,e.message,n,t,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const ki=Si;function Oi(e){return vi.isPlainObject(e)||vi.isArray(e)}function Ti(e){return vi.endsWith(e,"[]")?e.slice(0,-2):e}function Pi(e,n,t){return e?e.concat(n).map((function(e,n){return e=Ti(e),!t&&n?"["+e+"]":e})).join(t?".":""):n}const Ii=vi.toFlatObject(vi,{},null,(function(e){return/^is[A-Z]/.test(e)})),Bi=function(e,n,t){if(!vi.isObject(e))throw new TypeError("target must be an object");n=n||new FormData;const r=(t=vi.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,n){return!vi.isUndefined(n[e])}))).metaTokens,o=t.visitor||u,i=t.dots,s=t.indexes,a=(t.Blob||"undefined"!=typeof Blob&&Blob)&&vi.isSpecCompliantForm(n);if(!vi.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(vi.isDate(e))return e.toISOString();if(!a&&vi.isBlob(e))throw new ki("Blob is not supported. Use a Buffer instead.");return vi.isArrayBuffer(e)||vi.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,t,o){let a=e;if(e&&!o&&"object"==typeof e)if(vi.endsWith(t,"{}"))t=r?t:t.slice(0,-2),e=JSON.stringify(e);else if(vi.isArray(e)&&function(e){return vi.isArray(e)&&!e.some(Oi)}(e)||(vi.isFileList(e)||vi.endsWith(t,"[]"))&&(a=vi.toArray(e)))return t=Ti(t),a.forEach((function(e,r){!vi.isUndefined(e)&&null!==e&&n.append(!0===s?Pi([t],r,i):null===s?t:t+"[]",c(e))})),!1;return!!Oi(e)||(n.append(Pi(o,t,i),c(e)),!1)}const l=[],h=Object.assign(Ii,{defaultVisitor:u,convertValue:c,isVisitable:Oi});if(!vi.isObject(e))throw new TypeError("data must be an object");return function e(t,r){if(!vi.isUndefined(t)){if(-1!==l.indexOf(t))throw Error("Circular reference detected in "+r.join("."));l.push(t),vi.forEach(t,(function(t,i){!0===(!(vi.isUndefined(t)||null===t)&&o.call(n,t,vi.isString(i)?i.trim():i,r,h))&&e(t,r?r.concat(i):[i])})),l.pop()}}(e),n};function Ui(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return n[e]}))}function Ni(e,n){this._pairs=[],e&&Bi(e,this,n)}const Ri=Ni.prototype;Ri.append=function(e,n){this._pairs.push([e,n])},Ri.toString=function(e){const n=e?function(n){return e.call(this,n,Ui)}:Ui;return this._pairs.map((function(e){return n(e[0])+"="+n(e[1])}),"").join("&")};const Li=Ni;function Ci(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $i(e,n,t){if(!n)return e;const r=t&&t.encode||Ci,o=t&&t.serialize;let i;if(i=o?o(n,t):vi.isURLSearchParams(n)?n.toString():new Li(n,t).toString(r),i){const n=e.indexOf("#");-1!==n&&(e=e.slice(0,n)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const _i=class{constructor(){this.handlers=[]}use(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){vi.forEach(this.handlers,(function(n){null!==n&&e(n)}))}},Fi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Di={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Li,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Hi="undefined"!=typeof window&&"undefined"!=typeof document,ji=(Ki="undefined"!=typeof navigator&&navigator.product,Hi&&["ReactNative","NativeScript","NS"].indexOf(Ki)<0);var Ki;const zi="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,qi={...t,...Di},Wi=function(e){function n(e,t,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;return i=!i&&vi.isArray(r)?r.length:i,a?(vi.hasOwnProp(r,i)?r[i]=[r[i],t]:r[i]=t,!s):(r[i]&&vi.isObject(r[i])||(r[i]=[]),n(e,t,r[i],o)&&vi.isArray(r[i])&&(r[i]=function(e){const n={},t=Object.keys(e);let r;const o=t.length;let i;for(r=0;r<o;r++)i=t[r],n[i]=e[i];return n}(r[i])),!s)}if(vi.isFormData(e)&&vi.isFunction(e.entries)){const t={};return vi.forEachEntry(e,((e,r)=>{n(function(e){return vi.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,t,0)})),t}return null},Vi={transitional:Fi,adapter:["xhr","http"],transformRequest:[function(e,n){const t=n.getContentType()||"",r=t.indexOf("application/json")>-1,o=vi.isObject(e);if(o&&vi.isHTMLForm(e)&&(e=new FormData(e)),vi.isFormData(e))return r&&r?JSON.stringify(Wi(e)):e;if(vi.isArrayBuffer(e)||vi.isBuffer(e)||vi.isStream(e)||vi.isFile(e)||vi.isBlob(e))return e;if(vi.isArrayBufferView(e))return e.buffer;if(vi.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(t.indexOf("application/x-www-form-urlencoded")>-1)return function(e,n){return Bi(e,new qi.classes.URLSearchParams,Object.assign({visitor:function(e,n,t,r){return qi.isNode&&vi.isBuffer(e)?(this.append(n,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},n))}(e,this.formSerializer).toString();if((i=vi.isFileList(e))||t.indexOf("multipart/form-data")>-1){const n=this.env&&this.env.FormData;return Bi(i?{"files[]":e}:e,n&&new n,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),function(e,n,t){if(vi.isString(e))try{return(0,JSON.parse)(e),vi.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const n=this.transitional||Vi.transitional,t=n&&n.forcedJSONParsing,r="json"===this.responseType;if(e&&vi.isString(e)&&(t&&!this.responseType||r)){const t=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(t){if("SyntaxError"===e.name)throw ki.from(e,ki.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qi.classes.FormData,Blob:qi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};vi.forEach(["delete","get","head","post","put","patch"],(e=>{Vi.headers[e]={}}));const Mi=Vi,Gi=vi.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yi=Symbol("internals");function Zi(e){return e&&String(e).trim().toLowerCase()}function Qi(e){return!1===e||null==e?e:vi.isArray(e)?e.map(Qi):String(e)}function Ji(e,n,t,r,o){return vi.isFunction(r)?r.call(this,n,t):(o&&(n=t),vi.isString(n)?vi.isString(r)?-1!==n.indexOf(r):vi.isRegExp(r)?r.test(n):void 0:void 0)}class Xi{constructor(e){e&&this.set(e)}set(e,n,t){const r=this;function o(e,n,t){const o=Zi(n);if(!o)throw new Error("header name must be a non-empty string");const i=vi.findKey(r,o);(!i||void 0===r[i]||!0===t||void 0===t&&!1!==r[i])&&(r[i||n]=Qi(e))}const i=(e,n)=>vi.forEach(e,((e,t)=>o(e,t,n)));return vi.isPlainObject(e)||e instanceof this.constructor?i(e,n):vi.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const n={};let t,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),t=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!t||n[t]&&Gi[t]||("set-cookie"===t?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)})),n})(e),n):null!=e&&o(n,e,t),this}get(e,n){if(e=Zi(e)){const t=vi.findKey(this,e);if(t){const e=this[t];if(!n)return e;if(!0===n)return function(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}(e);if(vi.isFunction(n))return n.call(this,e,t);if(vi.isRegExp(n))return n.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Zi(e)){const t=vi.findKey(this,e);return!(!t||void 0===this[t]||n&&!Ji(0,this[t],t,n))}return!1}delete(e,n){const t=this;let r=!1;function o(e){if(e=Zi(e)){const o=vi.findKey(t,e);!o||n&&!Ji(0,t[o],o,n)||(delete t[o],r=!0)}}return vi.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let t=n.length,r=!1;for(;t--;){const o=n[t];e&&!Ji(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const n=this,t={};return vi.forEach(this,((r,o)=>{const i=vi.findKey(t,o);if(i)return n[i]=Qi(r),void delete n[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,n,t)=>n.toUpperCase()+t))}(o):String(o).trim();s!==o&&delete n[o],n[s]=Qi(r),t[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return vi.forEach(this,((t,r)=>{null!=t&&!1!==t&&(n[r]=e&&vi.isArray(t)?t.join(", "):t)})),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,n])=>e+": "+n)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const t=new this(e);return n.forEach((e=>t.set(e))),t}static accessor(e){const n=(this[Yi]=this[Yi]={accessors:{}}).accessors,t=this.prototype;function r(e){const r=Zi(e);n[r]||(function(e,n){const t=vi.toCamelCase(" "+n);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+t,{value:function(e,t,o){return this[r].call(this,n,e,t,o)},configurable:!0})}))}(t,e),n[r]=!0)}return vi.isArray(e)?e.forEach(r):r(e),this}}Xi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),vi.reduceDescriptors(Xi.prototype,(({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(e){this[t]=e}}})),vi.freezeMethods(Xi);const es=Xi;function ns(e,n){const t=this||Mi,r=n||t,o=es.from(r.headers);let i=r.data;return vi.forEach(e,(function(e){i=e.call(t,i,o.normalize(),n?n.status:void 0)})),o.normalize(),i}function ts(e){return!(!e||!e.__CANCEL__)}function rs(e,n,t){ki.call(this,null==e?"canceled":e,ki.ERR_CANCELED,n,t),this.name="CanceledError"}vi.inherits(rs,ki,{__CANCEL__:!0});const os=rs,is=qi.hasStandardBrowserEnv?{write(e,n,t,r,o,i){const s=[e+"="+encodeURIComponent(n)];vi.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),vi.isString(r)&&s.push("path="+r),vi.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ss(e,n){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)?function(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}(e,n):n}const as=qi.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let t;function r(t){let r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){const n=vi.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0};function cs(e,n){let t=0;const r=function(e,n){e=e||10;const t=new Array(e),r=new Array(e);let o,i=0,s=0;return n=void 0!==n?n:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),t[i]=a,r[i]=c;let l=s,h=0;for(;l!==i;)h+=t[l++],l%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<n)return;const f=u&&c-u;return f?Math.round(1e3*h/f):void 0}}(50,250);return o=>{const i=o.loaded,s=o.lengthComputable?o.total:void 0,a=i-t,c=r(a);t=i;const u={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:o};u[n?"download":"upload"]=!0,e(u)}}const us={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(n,t){let r=e.data;const o=es.from(e.headers).normalize();let i,s,{responseType:a,withXSRFToken:c}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}if(vi.isFormData(r))if(qi.hasStandardBrowserEnv||qi.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if(!1!==(s=o.getContentType())){const[e,...n]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...n].join("; "))}let l=new XMLHttpRequest;if(e.auth){const n=e.auth.username||"",t=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(n+":"+t))}const h=ss(e.baseURL,e.url);function f(){if(!l)return;const r=es.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,n,t){const r=t.config.validateStatus;t.status&&r&&!r(t.status)?n(new ki("Request failed with status code "+t.status,[ki.ERR_BAD_REQUEST,ki.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}((function(e){n(e),u()}),(function(e){t(e),u()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),$i(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(f)},l.onabort=function(){l&&(t(new ki("Request aborted",ki.ECONNABORTED,e,l)),l=null)},l.onerror=function(){t(new ki("Network Error",ki.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let n=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Fi;e.timeoutErrorMessage&&(n=e.timeoutErrorMessage),t(new ki(n,r.clarifyTimeoutError?ki.ETIMEDOUT:ki.ECONNABORTED,e,l)),l=null},qi.hasStandardBrowserEnv&&(c&&vi.isFunction(c)&&(c=c(e)),c||!1!==c&&as(h))){const n=e.xsrfHeaderName&&e.xsrfCookieName&&is.read(e.xsrfCookieName);n&&o.set(e.xsrfHeaderName,n)}void 0===r&&o.setContentType(null),"setRequestHeader"in l&&vi.forEach(o.toJSON(),(function(e,n){l.setRequestHeader(n,e)})),vi.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",cs(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",cs(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=n=>{l&&(t(!n||n.type?new os(null,e,l):n),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const d=function(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}(h);d&&-1===qi.protocols.indexOf(d)?t(new ki("Unsupported protocol "+d+":",ki.ERR_BAD_REQUEST,e)):l.send(r||null)}))}};vi.forEach(us,((e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch(e){}Object.defineProperty(e,"adapterName",{value:n})}}));const ls=e=>`- ${e}`,hs=e=>vi.isFunction(e)||null===e||!1===e,fs=e=>{e=vi.isArray(e)?e:[e];const{length:n}=e;let t,r;const o={};for(let i=0;i<n;i++){let n;if(t=e[i],r=t,!hs(t)&&(r=us[(n=String(t)).toLowerCase()],void 0===r))throw new ki(`Unknown adapter '${n}'`);if(r)break;o[n||"#"+i]=r}if(!r){const e=Object.entries(o).map((([e,n])=>`adapter ${e} `+(!1===n?"is not supported by the environment":"is not available in the build")));let t=n?e.length>1?"since :\n"+e.map(ls).join("\n"):" "+ls(e[0]):"as no adapter specified";throw new ki("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return r};function ds(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new os(null,e)}function ps(e){return ds(e),e.headers=es.from(e.headers),e.data=ns.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),fs(e.adapter||Mi.adapter)(e).then((function(n){return ds(e),n.data=ns.call(e,e.transformResponse,n),n.headers=es.from(n.headers),n}),(function(n){return ts(n)||(ds(e),n&&n.response&&(n.response.data=ns.call(e,e.transformResponse,n.response),n.response.headers=es.from(n.response.headers))),Promise.reject(n)}))}const gs=e=>e instanceof es?e.toJSON():e;function ys(e,n){n=n||{};const t={};function r(e,n,t){return vi.isPlainObject(e)&&vi.isPlainObject(n)?vi.merge.call({caseless:t},e,n):vi.isPlainObject(n)?vi.merge({},n):vi.isArray(n)?n.slice():n}function o(e,n,t){return vi.isUndefined(n)?vi.isUndefined(e)?void 0:r(void 0,e,t):r(e,n,t)}function i(e,n){if(!vi.isUndefined(n))return r(void 0,n)}function s(e,n){return vi.isUndefined(n)?vi.isUndefined(e)?void 0:r(void 0,e):r(void 0,n)}function a(t,o,i){return i in n?r(t,o):i in e?r(void 0,t):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,n)=>o(gs(e),gs(n),!0)};return vi.forEach(Object.keys(Object.assign({},e,n)),(function(r){const i=c[r]||o,s=i(e[r],n[r],r);vi.isUndefined(s)&&i!==a||(t[r]=s)})),t}const ws={};["object","boolean","number","function","string","symbol"].forEach(((e,n)=>{ws[e]=function(t){return typeof t===e||"a"+(n<1?"n ":" ")+e}}));const ms={};ws.transitional=function(e,n,t){function r(e,n){return"[Axios v1.6.6] Transitional option '"+e+"'"+n+(t?". "+t:"")}return(t,o,i)=>{if(!1===e)throw new ki(r(o," has been removed"+(n?" in "+n:"")),ki.ERR_DEPRECATED);return n&&!ms[o]&&(ms[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),!e||e(t,o,i)}};const bs={assertOptions:function(e,n,t){if("object"!=typeof e)throw new ki("options must be an object",ki.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=n[i];if(s){const n=e[i],t=void 0===n||s(n,i,e);if(!0!==t)throw new ki("option "+i+" must be "+t,ki.ERR_BAD_OPTION_VALUE)}else if(!0!==t)throw new ki("Unknown option "+i,ki.ERR_BAD_OPTION)}},validators:ws},Es=bs.validators;class vs{constructor(e){this.defaults=e,this.interceptors={request:new _i,response:new _i}}async request(e,n){try{return await this._request(e,n)}catch(e){const n={};throw Error.captureStackTrace?Error.captureStackTrace(n):n.stack=(new Error).stack,n.stack=n.stack.replace(/^.+\n/,""),e.stack.endsWith(n.stack.replace(/^.+\n.+\n/,""))||(e.stack+="\n"+n.stack),e}}_request(e,n){"string"==typeof e?(n=n||{}).url=e:n=e||{},n=ys(this.defaults,n);const{transitional:t,paramsSerializer:r,headers:o}=n;void 0!==t&&bs.assertOptions(t,{silentJSONParsing:Es.transitional(Es.boolean),forcedJSONParsing:Es.transitional(Es.boolean),clarifyTimeoutError:Es.transitional(Es.boolean)},!1),null!=r&&(vi.isFunction(r)?n.paramsSerializer={serialize:r}:bs.assertOptions(r,{encode:Es.function,serialize:Es.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&vi.merge(o.common,o[n.method]);o&&vi.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),n.headers=es.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(n)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,h=0;if(!a){const e=[ps.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,u=Promise.resolve(n);h<l;)u=u.then(e[h++],e[h++]);return u}l=s.length;let f=n;for(h=0;h<l;){const e=s[h++],n=s[h++];try{f=e(f)}catch(e){n.call(this,e);break}}try{u=ps.call(this,f)}catch(e){return Promise.reject(e)}for(h=0,l=c.length;h<l;)u=u.then(c[h++],c[h++]);return u}getUri(e){return $i(ss((e=ys(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}vi.forEach(["delete","get","head","options"],(function(e){vs.prototype[e]=function(n,t){return this.request(ys(t||{},{method:e,url:n,data:(t||{}).data}))}})),vi.forEach(["post","put","patch"],(function(e){function n(n){return function(t,r,o){return this.request(ys(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:t,data:r}))}}vs.prototype[e]=n(),vs.prototype[e+"Form"]=n(!0)}));const Ss=vs;class xs{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let n;this.promise=new Promise((function(e){n=e}));const t=this;this.promise.then((e=>{if(!t._listeners)return;let n=t._listeners.length;for(;n-- >0;)t._listeners[n](e);t._listeners=null})),this.promise.then=e=>{let n;const r=new Promise((e=>{t.subscribe(e),n=e})).then(e);return r.cancel=function(){t.unsubscribe(n)},r},e((function(e,r,o){t.reason||(t.reason=new os(e,r,o),n(t.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);-1!==n&&this._listeners.splice(n,1)}static source(){let e;return{token:new xs((function(n){e=n})),cancel:e}}}const As=xs,ks={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ks).forEach((([e,n])=>{ks[n]=e}));const Os=ks,Ts=function e(n){const t=new Ss(n),r=jo(Ss.prototype.request,t);return vi.extend(r,Ss.prototype,t,{allOwnKeys:!0}),vi.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return e(ys(n,t))},r}(Mi);Ts.Axios=Ss,Ts.CanceledError=os,Ts.CancelToken=As,Ts.isCancel=ts,Ts.VERSION="1.6.6",Ts.toFormData=Bi,Ts.AxiosError=ki,Ts.Cancel=Ts.CanceledError,Ts.all=function(e){return Promise.all(e)},Ts.spread=function(e){return function(n){return e.apply(null,n)}},Ts.isAxiosError=function(e){return vi.isObject(e)&&!0===e.isAxiosError},Ts.mergeConfig=ys,Ts.AxiosHeaders=es,Ts.formToJSON=e=>Wi(vi.isHTMLForm(e)?new FormData(e):e),Ts.getAdapter=fs,Ts.HttpStatusCode=Os,Ts.default=Ts;const Ps=Ts;function Is(e){return Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Is(e)}function Bs(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return Us(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Us(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}function Us(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ns(){Ns=function(){return n};var e,n={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,n,t){e[n]=t.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{u({},"")}catch(e){u=function(e,n,t){return e[n]=t}}function l(e,n,t,r){var i=n&&n.prototype instanceof w?n:w,s=Object.create(i.prototype),a=new B(r||[]);return o(s,"_invoke",{value:O(e,t,a)}),s}function h(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}n.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",y={};function w(){}function m(){}function b(){}var E={};u(E,s,(function(){return this}));var v=Object.getPrototypeOf,S=v&&v(v(U([])));S&&S!==t&&r.call(S,s)&&(E=S);var x=b.prototype=w.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(n){u(e,n,(function(e){return this._invoke(n,e)}))}))}function k(e,n){function t(o,i,s,a){var c=h(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Is(l)&&r.call(l,"__await")?n.resolve(l.__await).then((function(e){t("next",e,s,a)}),(function(e){t("throw",e,s,a)})):n.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return t("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new n((function(n,o){t(e,r,n,o)}))}return i=i?i.then(o,o):o()}})}function O(n,t,r){var o=f;return function(i,s){if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=T(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=h(n,t,r);if("normal"===u.type){if(o=r.done?g:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function T(n,t){var r=t.method,o=n.iterator[r];if(o===e)return t.delegate=null,"throw"===r&&n.iterator.return&&(t.method="return",t.arg=e,T(n,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,n.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,y;var s=i.arg;return s?s.done?(t[n.resultName]=s.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,y):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function P(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function I(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function U(n){if(n||""===n){var t=n[s];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,i=function t(){for(;++o<n.length;)if(r.call(n,o))return t.value=n[o],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(Is(n)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},n.awrap=function(e){return{__await:e}},A(k.prototype),u(k.prototype,a,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var s=new k(l(e,t,r,o),i);return n.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},A(x),u(x,c,"Generator"),u(x,s,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=U,B.prototype={constructor:B,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!n)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function o(r,o){return a.type="throw",a.arg=n,t.next=r,o&&(t.method="next",t.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=n,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),y},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),I(t),y}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;I(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,r){return this.delegate={iterator:U(n),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=e),y}},n}function Rs(e,n,t,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void t(e)}a.done?n(c):Promise.resolve(c).then(r,o)}function Ls(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function s(e){Rs(i,r,o,s,a,"next",e)}function a(e){Rs(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Cs(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$s(r.key),r)}}function $s(e){var n=function(e,n){if("object"!=Is(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Is(n)?n:String(n)}var _s=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.feeEstiamtor=""}var n,t,o,i,s,a,c;return n=e,t=[{key:"readFileAsByteArray",value:(c=Ls(Ns().mark((function e(n,t){var r;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FileReader).onload=function(e){var n=e.target.result,r=new Uint8Array(n);t(null,r)},r.onerror=function(e){t(new Error("Error reading the file",e.target.error))},r.readAsArrayBuffer(n);case 4:case"end":return e.stop()}}),e)}))),function(e,n){return c.apply(this,arguments)})},{key:"textToUTF8Array",value:function(e){return(new TextEncoder).encode(e)}},{key:"generateMnemonic",value:function(){return function(e,n=128){if(r(n),n%32!=0||n>256)throw new TypeError("Invalid entropy");return function(e,n){return Ie(e),Ue(n).encode(e).join((e=>""===e[0])(n)?"":" ")}(E(n/8),e)}(Re,128)}},{key:"validateMnemonic",value:function(e){return function(e,n){try{!function(e,n){const{words:t}=Pe(e);Ie(Ue(n).decode(t))}(e,n)}catch(e){return!1}return!0}(e,Re)}},{key:"getEstimatedFee",value:(a=Ls(Ns().mark((function e(){var n;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.feeEstiamtor.getFeeRate();case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),this.handleError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return a.apply(this,arguments)})},{key:"getInputs",value:(s=Ls(Ns().mark((function e(n,t){var r,o,i,s,a,c,u,l;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=process.env.BITCOIN_API,e.next=4,Ps.get("".concat(r,"/unspent/").concat(t.getAddress()));case 4:o=e.sent,i=o.data,s=0,a=[],c=Bs(i),e.prev=9,c.s();case 11:if((u=c.n()).done){e.next=19;break}if(l=u.value,s+=l.amount,a.push(l),!(s>=n)){e.next=17;break}return e.abrupt("break",19);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return s<n&&this.handleError("Insufficient funds"),e.abrupt("return",a);case 31:e.prev=31,e.t1=e.catch(0),this.handleError(e.t1);case 34:case"end":return e.stop()}}),e,this,[[0,31],[9,21,24,27]])}))),function(e,n){return s.apply(this,arguments)})},{key:"derivePrivateKey",value:function(e){return vt.fromMasterSeed(e).derive("m/44' /0' /0' /0/0").privateKey}},{key:"createTransaction",value:(i=Ls(Ns().mark((function e(n,t){var r,o,i,s,a,c,u,l;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Ho,o=new Uint8Array([76,n.length]).join(n),r.addOutput({script:o,value:0}),r.setNetwork("testnet"),e.next=7,this.getEstimatedFee();case 7:return i=e.sent,s=Math.ceil(r.fee({feeRate:i})),e.next=11,this.getInputs(s,t);case 11:a=e.sent,c=Bs(a);try{for(c.s();!(u=c.n()).done;)l=u.value,r.addInput(l.txid,l.vout,4294967295,Buffer.from(l.script,"hex"))}catch(e){c.e(e)}finally{c.f()}return r.sign(0,t),e.abrupt("return",r.build());case 18:e.prev=18,e.t0=e.catch(0),this.handleError(e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(e,n){return i.apply(this,arguments)})},{key:"broadcastTx",value:(o=Ls(Ns().mark((function e(n){var t,r,o;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=process.env.BITCOIN_API,r={txid:n.id,hex:n.toHex()},e.next=5,Ps.post(t,r);case 5:o=e.sent,console.log("Transaction broadcast successfully: ",o.data),this.displayResults(o.data),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error broadcasting transaction: ",e.t0),this.handleError(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return o.apply(this,arguments)})},{key:"uploadToBitcoin",value:function(e){try{var n=this.generateMnemonic();if(console.log("Generated mnemonic: ",n),this.validateMnemonic(n)){var t=Ne(n,process.env.PASSWORD),r=this.derivePrivateKey(t),o=this.createTransaction(e,r);this.broadcastTx(o)}else this.handleError("Invalid mnemonic")}catch(e){this.handleError(e)}}},{key:"displayResults",value:function(e){document.getElementById("result").innerHTML="Broadcasting transaction: ".concat(e)}},{key:"handleError",value:function(e){console.error(e),document.getElementById("result").innerHTML='<span style="color: red;">Error: '.concat(e,"</span>")}}],t&&Cs(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),e}());window.processInputs=function(){var e=document.getElementById("fileInput"),n=document.getElementById("textInput"),t=document.getElementById("result");if(e.files.length>0){var r=e.files[0];_s.readFileAsByteArray(r,(function(e,n){t.innerHTML=e?'<span style="color: red;">Error reading file: '.concat(e.message,"</span>"):'<p style="color: black;"> File Content (as byte array): '.concat(n.join(","),"</p>")}))}var o=n.value.trim();if(""!==o){var i=_s.textToUTF8Array(o);t.innerHTML+='<p style="color: black;"> Text Content (as utf-8 array): '.concat(i.join(","),"</p>")}}})();
//# sourceMappingURL=bundle.js.map